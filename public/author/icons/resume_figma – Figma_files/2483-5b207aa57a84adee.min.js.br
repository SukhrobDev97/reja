"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ea89790c-b6ca-5a1b-901a-6be8e1778e2d")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2483],{258539:(e,t,n)=>{n.d(t,{W:()=>u});var i=n(848318),a=n(301168),r=n(410725),l=n(748008),o=n(182317),s=n(337752),d=n(55116);function u(e=!1){let t=(0,a.wA)(),n=i.useMemo(()=>(0,o.g)(),[]),c=(0,r.Rs)(d.gvX,{cacheNonce:n});i.useEffect(()=>{if("loaded"!==c.status)return;let n=(0,l.oA)(c.data.currentUser.notificationExperimentInfo);n&&("exp_notification_catfile"===n.experimentName||"exp_notification_catfic"===n.experimentName)&&("prompt_to_opt_in"===n.type?t((e?s.hU:s.ZI)({userId:n.userId,fileKey:n.fileKey,experimentName:n.experimentName})):t(s.EJ({userId:n.userId,fileKey:n.fileKey,preference:n.preference})))},[t,c,e])}},408742:(e,t,n)=>{n.d(t,{_:()=>u});var i=n(848318),a=n(186606),r=n(720522),l=n(218010),o=n(531288),s=n(601167),d=n(733644);let u=i.memo(function(e){let{nodeId:t}=e,n=i.useRef(null),r=i.useRef(null),l=(0,s._X)({subscribeToUpdates_expensive:!0});return i.useEffect(()=>{let e=(0,o.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){a.glU.removeLoadingEmbed(t);return}r.current=e.position,m(n,l,r)}),i=e.currentNodePosition[t]?.position;return i?(r.current=i,m(n,l,r)):a.glU.removeLoadingEmbed(t),()=>{(0,o.lB)(`loading-embed-${t}`)}},[t,l]),i.createElement("div",{ref:n},i.createElement(c,null))});function c(){return i.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},i.createElement(r.B,{svg:d.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function m(e,t,n){if(!e.current||!t||!n.current)return;let i=e.current,a=n.current,r=(0,s.Yb)(t,a),o=28*t.zoomScale;i.style.transform=`translate(${r.x+(r.width-o)/2+t.x}px, ${r.y+(r.height*l.Ao/l.RN-o)/2+t.y}px) rotate(${a.angle}deg) scale(${t.zoomScale})`,i.style.transformOrigin="top left",i.style.position="absolute"}},397157:(e,t,n)=>{n.d(t,{Pm:()=>i,aF:()=>r});var i=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(i||{}),a=(e=>(e.Light="light",e.Dark="dark",e))(a||{});function r(e){let t,n;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}n="LIGHT"===t?"light":"dark";let i="true"===e.hideBackground;return i&&(n=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(n)),{theme:t,preferredTokenTheme:n,transparentMode:i}}},173811:(e,t,n)=>{n.d(t,{DR:()=>x,E$:()=>O,Wd:()=>L,gD:()=>k,lu:()=>R,wL:()=>C});var i=n(848318),a=n(301168),r=n(773511),l=n(12559),o=n(186606),s=n(320953),d=n(768618),u=n(536384),c=n.n(u),m=n(140357),f=n(297638),p=n(967688),E=n(952039),g=n(113752),v=n(899386),y=n(809969),I=n(209595),b=n(125761),h=n(554326),S=n(385645),N=n(553007),P=n(340204),w=n(54462),_=n(708618),T=n(503596);function x(e){let{nodeId:t,setConfigData:n,isReadOnly:r}=e,{isEmbedActive:l,setActiveEmbed:u}=(0,P._)(t),c=!r,m=(0,a.wA)(),f=(0,h.J2)(o.Ez5.flappData().embeddablePrototypeIdPendingInsertion),[y,I]=(0,i.useState)(),b=(0,i.useMemo)(()=>{let t=k(e.configData);if(!t)return;let n=v.hY[t.presetIdentifier],i=t.rotation===o.xOL.CCW_90;return(i?n.imageSize.y:n.imageSize.x)/(i?n.imageSize.x:n.imageSize.y)},[e.configData]);(0,i.useEffect)(()=>{if(!c)return;let e=(0,d.UN)().get(t),n=b??y;e&&n&&s.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,i=Math.floor(t/n);0===e.size.x&&(e.x-=t/2,e.y-=i/2),e.resizeWithConstraints(t,i),e.proportionsConstrained=!0})},[t,b,y,c]),(0,i.useEffect)(()=>{t===f&&(m(E.F.enqueue({type:"slides-embedded-prototype",message:(0,p.t)("slides.inserting_embed.visual_bell"),icon:g.zX.SPINNER,timeoutOverride:1/0})),u(),setTimeout(()=>{t===o.Ez5.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&o.oHM.embeddablePrototypeLoadFailed()},3e4))},[t,f,m,u]),(0,i.useEffect)(()=>{let e=e=>{if(e.origin===location.origin&&(!e.source||!("frameElement"in e.source)||null==e.source.frameElement||e.source.frameElement.id===N.xu+t)){if("EMBED_PROTO_ASPECT_RATIO"===e.data.type&&e.data.data.aspectRatio&&(I(e.data.data.aspectRatio),t===f&&o.oHM.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===e.data.type){let t=e.data.data;c&&t&&t.device?s.l7.system("embed-deviceframe",()=>{n("deviceFrameShown",""!==t.device.presetIdentifier&&"PRESET"===t.device.type?"true":"false"),n("deviceFramePreset",t.device.presetIdentifier),n("deviceFrameRotation",t.device.rotation)}):c&&s.l7.system("embed-deviceframe",()=>{n("deviceFrameShown","false"),n("deviceFramePreset",""),n("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===e.data.type){let t=e.data.data;c&&t&&s.l7.system("embed-file-metatada",()=>{n("fileName",t.fileName),n("pageName",t.pageName),t.activeStartingPointNodeId&&n("activeStartingPointNodeId",t.activeStartingPointNodeId),t.startingPointsData&&n("startingPointsData",JSON.stringify(t.startingPointsData))})}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,n,m,f,c]);let S=(0,P.s)(t)||!l;return i.createElement(D,{...e,isActive:l,setActive:u,disablePointerEvents:!S})}function O(e){let t=(0,I.mr)(),n=(0,m.hk)(),a=e.nodeId,[r,l]=(0,i.useState)(n?.getActiveSlidesEmbeddedPrototype()===a);(0,m.O5)(n,"activeSlidesPrototypeEmbedChange",e=>{l(e===a)});let o=(0,i.useCallback)(e=>{t.isAudienceViewPopout?(0,w.o)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):n?.setActiveSlidesEmbeddedPrototype(e)},[n,t]);return i.createElement(D,{...e,isActive:r,setActive:o})}function D({configData:e,nodeId:t,setConfigData:n,isViewer:a,isActive:r,setActive:l,disablePointerEvents:o,invalidateThumbnail:s}){let d=(0,m.hk)(),u=k(e),c=i.useCallback(e=>{if(t!==e.nodeId)return;let n=z(t);n&&!d?.isPresenterSession()&&n.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=e.presenterSessionId?e.presenterSessionId:-1}},"*")},[t,d]);(0,m.O5)(d,"embeddedPrototypeChange",c);let p=i.useCallback(e=>{let n=z(t);n?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,i.useEffect)(()=>{e.activeStartingPointNodeId&&p(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,p]),(0,i.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==N.xu+t||!d||"PRESENTER_SESSION_ID"!==e.data.type||d.handleEmbeddedPrototypeChange(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[d,t,n,a]),(0,i.useEffect)(()=>()=>{d?.handleEmbeddedPrototypeChange(t,-1)},[d,t]),i.createElement(C,{deviceFrame:u,invalidateThumbnail:s},i.createElement("div",{className:f.s.hFull.wFull.$,style:{pointerEvents:o?"none":"auto"}},r&&e.url?i.createElement(F,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!r&&l?i.createElement(R,{isViewer:a,onClick:()=>l(t)}):null))}let R=i.memo(({isViewer:e,onClick:t})=>e?i.createElement(r.E,{className:c()(T.kg,f.s.cursorPointer.$),onClick:t},i.createElement(l.l,{className:T.uZ})):i.createElement("div",{className:T.kg},i.createElement(l.l,{className:c()(T.uZ,f.s.cursorPointer.$),onClick:t})));function C({deviceFrame:e,children:t,invalidateThumbnail:n}){let a=e?.rotation===o.xOL.CCW_90?{x:e?.size.y??$.size.y,y:e?.size.x??$.size.x}:{x:e?.size.x??$.size.x,y:e?.size.y??$.size.y};return i.createElement("div",{className:c()(T.kL)},i.createElement(S._,{initialViewerSize:a,isDeviceFrameShown:null!=e&&e.type===o.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:n},t))}function F({baseUrl:e,nodeId:t,activeStartingNodeId:n}){let[a,r]=(0,i.useState)(n),l=function(e,t,n){let i;if(!e)return null;try{i=new URL(e)}catch(e){return null}let a=i.searchParams;return(0,_.e)(a,"bare-ui","1"),(0,_.e)(a,"scaling","fit-width"),(0,_.e)(a,"content-scaling","fixed"),(0,_.e)(a,"needsAlpha","1"),(0,_.e)(a,"inline-viewer","1"),(0,_.e)(a,"disable-default-keyboard-nav","1"),t&&(0,_.e)(a,"fuid",t),n&&(0,_.e)(a,"starting-point-node-id",n),i}(e,(0,b.TA)(),a);return i.createElement("div",{className:T.pU},i.createElement("iframe",{id:`${N.xu}${t}`,className:T.pU,loading:"eager",src:l?.toString(),title:(0,p.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"}))}function z(e){return document.getElementById(N.xu+e)}let A=e=>{switch(e){case"NONE":default:return o.xOL.NONE;case"CCW_90":return o.xOL.CCW_90}};function L(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function k(e){return L(e)?function(e){let t=v.hY[e.deviceFramePreset??""];return t?{type:o.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:A(e.deviceFrameRotation)}:null}(e):null}let U=y.eo[0],$={type:o.XQq.PRESET,size:U.framePresetSize,presetIdentifier:U.presetIdentifier,rotation:o.xOL.NONE}},521e3:(e,t,n)=>{n.d(t,{u:()=>w});var i=n(848318),a=n(891627),r=n(186606),l=n(320953),o=n(768618),s=n(127974),d=n(674128),u=n.n(d),c=n(813321),m=n(989232),f=n(238462),p=n(439952),E=n(531288),g=n(859480),v=n(601167),y=n(355755),I=n(730143),b=n(554326),h=n(880801),S=n(619534),N=n(185006),P=n(846751);function w(){let e=(0,v._X)({subscribeToUpdates_expensive:!0}),t=(0,y.p8)("isReadOnly"),n=(0,y.p8)("topLevelMode")===r.lyf.HISTORY,l=(0,s.k9)(()=>e,[e]),o=document.getElementById("fullscreen-root");if(!o)return null;let d=o.querySelectorAll(".view.container-view");if(0===d.length)return null;let u=d[d.length-1];return u?(0,a.createPortal)(i.createElement(_,{viewportInfo:l,isReadOnly:t||n}),u):null}function _({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:n}){let a=(0,i.useCallback)((e,t)=>{let n=(0,o.UN)().get(e.nodeId),i=n?.containingSlideId,a=n?.containingCanvas;if(n&&e.position&&i)return{guid:e.nodeId,slideId:i,pageId:a,position:t,type:n.interactiveSlideElementType}},[]),l=(0,b.J2)(r.Ez5.flappData().nodeIds),d=(0,E.tB)("Flapps",l,a,{useFlushSyncExpensive:!0}),u=(0,b.J2)(r.Ez5.singleSlideView().focusedNodeId),c=r.Ez5.singleSlideView().isFocusedNodeViewFocused(),m=(0,g.dh)(),f=(0,s.k9)(()=>Object.values(d).filter(e=>e.pageId===m&&(!c||c&&e.slideId===u)),[d,c,u,m]);return(0,S.wj)(h.JT.BOARD_TO_DECK).state===S.qy.RUNNING?null:i.createElement(i.Fragment,null,f.map(a=>i.createElement(T,{key:a.guid,element:a,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:n})))}let T=i.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:n,isReadOnly:a})=>{let l=(0,b.J2)(r.Ez5.flappData().nodeThumbnailEditCount).get(e.guid)??0,[s,d]=(0,i.useState)(0),u=(0,i.useCallback)(()=>d(e=>e+1),[]),[c,m]=(0,i.useState)(null);if(!e||!e.position||!t)return i.createElement(i.Fragment,null);let f=(0,o.UN)().get(e.guid);if(!f)return null;let p=(0,v.Yb)(t,e.position);return i.createElement("div",{title:f.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${p.x}px, ${p.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:a?"none":"auto"}},i.createElement("div",{className:P.U,ref:m},i.createElement(x,{element:e,shouldRenderMobileFlapp:n,isReadOnly:a,invalidateThumbnail:u})),c&&e.type!==r.a9h.YOUTUBE&&i.createElement(O,{nodeId:e.guid,editCount:l,flappDomElement:c,isReadOnly:a,manualThumbnailInvalidationCount:s}))});function x({element:e,shouldRenderMobileFlapp:t,isReadOnly:n,invalidateThumbnail:a}){if(null===e.type)return null;let{EditorFlapp:r}=t?(0,N.v)(e.type):(0,N.Z)(e.type);return i.createElement(r,{nodeId:e.guid,isReadOnly:n,invalidateThumbnail:a})}function O({nodeId:e,editCount:t,manualThumbnailInvalidationCount:n,flappDomElement:a,isReadOnly:r}){let[s]=(0,c.A)(t,500),[d]=(0,c.A)(n,500),E=(0,I.tS)();return i.useEffect(()=>{var t;if(r)return;let n=(0,o.UN)().get(e);if(!n||"INTERACTIVE_SLIDE_ELEMENT"!==n.type)return;let i=f.lQ;return t=()=>{i=function(e,t,n){let i=t.interactiveSlideElementType,a=t.guid,r=!1;return u().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,p.UD)(new Uint8Array(e),"image/png",`${a}thumbnail`)}).then(e=>{t.isAlive&&!r&&l.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,m.sx)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:a,flappType:i,fileKey:n},{forwardToDatadog:!0})}),()=>{r=!0}}(a,n,E??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),i},[r,e,s,d,a,E]),i.createElement(i.Fragment,null)}}}]);

//# debugId=ea89790c-b6ca-5a1b-901a-6be8e1778e2d

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/8a01744032b7b86a63c6490394bbad018cfbc8c7/2483-5b207aa57a84adee.min.js.map