"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f6a2eeda-a82d-53c2-a109-6bf5f19d303c")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[7872],{20170:(e,t,l)=>{l.r(t),l.d(t,{DesignView:()=>oM});var n=l(848318),r=l(301168),a=l(860676),i=l(186606),o=l(580494),s=l(656329),d=l(386040),u=l(967688),c=l(952039),m=l(866258),g=l(413927),p=l(768618),E=l(999667),_=l(989232),b=l(359822),f=l(615233),x=l(178806),y=l(740495),h=l(957872),S=l(34375),R=l(34542),v=l(338104),T=l(15105),k=l(531288),C=l(601167),I=l(263336),L=l(556049),N=l(593713),A=l(67391),O=l(136169),w=l(555637),M=l(722541);let P=(0,f.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8");function $({changedNodeId:e,nodeHeight:t,complete:l}){return(0,b.h)(()=>{i.Egt?.replaceSelection([e],!0)}),n.createElement(N.NJ,{arrowPosition:L.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:M.R3,closeButtonClassName:M.b,dismissModal:l,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:t?-t/2-15:0,width:240},n.createElement("div",{className:M.Rg},(0,u.t)("dev_handoff.rfd_signals_upsell.title")),n.createElement("div",{className:M.O6},n.createElement("div",{className:M.j},n.createElement(A.GV,{src:P,width:240})),n.createElement("div",{className:M.zu},(0,u.t)("dev_handoff.rfd_signals_upsell.description"))),n.createElement("div",{className:M.JP},n.createElement(g.v,{mode:"dev-handoff"},n.createElement(x.$z,{trackingProperties:{trackingDescriptor:h.c.MARK_READY_FOR_DEV},variant:"primary",onClick:function(){e&&(l(),v.z4.setNodesReady(!0,[e],"dev-node-change-upsell",null))}},(0,u.t)("dev_handoff.rfd_signals_upsell.mark_ready_for_dev")))))}function V(e){_.az.trackDefinedEvent("activation.rfd_signal_upsell.disqualification_reason",{reason:e,upsellSubject:"frame"})}function B(){let[e,t]=n.useState(null),[l,r]=n.useState(null),a=(0,C._X)({subscribeToUpdates_expensive:!0}),i=(0,E.Xr)(w.hj),o=(0,E.Xr)(w.d1),s=(0,E.md)(w.Sp),d=(0,E.Xr)(w.Sp),u=n.useRef(null),c=(0,T.Z)("dev-handoff-rfd-signals-frame-upsell"),[m,g]=n.useState(!1),_=n.useCallback(()=>{u.current&&r(u.current.absoluteBounds.height*a.zoomScale)},[a.zoomScale]);n.useEffect(()=>{if(!e)return;let t=`dev-node-change-upsell-${e}`,l=(0,k.EE)(t,[e],e=>{u.current=e.position,_()});return u.current=l.currentNodePosition[e]?.position||null,_(),()=>{(0,k.lB)(t)}},[e,_]);let b=(0,y.cR)(),{show:f,complete:x,uniqueId:h,isShowing:v}=(0,R.e)({overlay:O.kBA,priority:I.N.HIGH_PRIORITY_MODAL,experiment:{check:b,predicate:e=>e,postCheck:()=>!0}});return(n.useEffect(()=>{o({fn:x})},[x,o]),(0,S.E)(h,["frame_node_name_changed_with_rfd_indicator"],e=>{if(!e.properties.nodeId){V("no_node_id");return}let l=(0,p.UN)().get(e.properties.nodeId);if(!l){V("node_not_found");return}if(0===l.childCount){V("no_children");return}if(!l.canHaveStatus){V("not_eligible_for_status");return}if(s){V("already_seen_upsell_this_session");return}t(e.properties.nodeId),i(e.properties.nodeId),r(l.absoluteBoundingBox.h),f({onShow:async()=>{g(!0),await c(await (0,C.QZ)({nodeId:e.properties.nodeId,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),g(!1),d(!0)}})}),e&&l&&v&&!m)?n.createElement($,{changedNodeId:e,nodeHeight:l,complete:x}):null}var z=l(301360),D=l(146776),F=l(480945),U=l(723437),H=l(128410);function G(e){_.az.trackDefinedEvent("activation.share_on_rfd_upsell.disqualification_reason",{reason:e,upsellSubject:"frame"})}let j=(0,f.ck)("bb7ff04eea67d99da7f8ceb51f1b3fe36d19bae0");function W({changedNodeId:e,nodeHeight:t,complete:l,file:r,repo:a}){let i=(0,H.l)({file:r,repo:a});return n.createElement(N.NJ,{arrowPosition:L.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:"share_on_ready_for_dev_overlay--tooltipContainer--eQp9n pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",closeButtonClassName:"share_on_ready_for_dev_overlay--closeButton--vY8RC",dismissModal:l,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:t?-t/2-15:0,width:240},n.createElement("div",{className:"share_on_ready_for_dev_overlay--tooltipHeader--kbL2h utilities--bodyMediumStrong--1R5cZ"},(0,u.t)("dev_handoff.share_on_rfd_upsell.title")),n.createElement("div",{className:"share_on_ready_for_dev_overlay--tooltipBody--leTtO utilities--bodyMediumStrong--1R5cZ"},n.createElement("div",{className:"share_on_ready_for_dev_overlay--videoContainer--JIoHd"},n.createElement(A.GV,{src:j,width:240})),n.createElement("div",{className:"share_on_ready_for_dev_overlay--tooltipBodyText--3YX-S"},(0,u.t)("dev_handoff.share_on_rfd_upsell.description"))),n.createElement("div",{className:"share_on_ready_for_dev_overlay--tooltipFooter--o-16t"},n.createElement(g.v,{mode:"dev-handoff"},n.createElement(x.$z,{trackingProperties:{trackingDescriptor:h.c.COPY_DEV_LINK},variant:"primary",onClick:function(){e&&(i({source:F.d.SHARE_ON_READY_FOR_DEV,linkQueryMode:U.iO.DEV_MODE}),l())}},(0,u.t)("dev_handoff.share_on_rfd_upsell.copy_dev_link")))))}function q(){let[e,t]=n.useState(null),[l,r]=n.useState(null),a=(0,C._X)({subscribeToUpdates_expensive:!0}),i=n.useRef(null),o=(0,T.Z)("dev-handoff-share-on-rfd-upsell"),[s,d]=n.useState(!1),u=(0,D.RC)(),c=(0,E.md)(w.Sp),m=n.useCallback(()=>{i.current&&r(i.current.absoluteBounds.height*a.zoomScale)},[a.zoomScale]);n.useEffect(()=>{if(!e)return;let t=`dev-share-on-rfd-upsell-${e}`,l=(0,k.EE)(t,[e],e=>{i.current=e.position,m()});return i.current=l.currentNodePosition[e]?.position||null,m(),()=>{(0,k.lB)(t)}},[e,m]);let g=(0,y.HX)(),{show:_,complete:b,uniqueId:f,isShowing:x}=(0,R.e)({overlay:O.b25,priority:I.N.HIGH_PRIORITY_MODAL,experiment:{check:g,predicate:e=>e,postCheck:()=>!0}});return((0,S.E)(f,["marked_ready_for_dev"],e=>{if(c){G("already_seen_upsell_this_session");return}let{nodeIds:l}=e.properties;if(!l||0===l.length){G("no_node_ids");return}if(l.length>1){G("multiple_node_ids");return}let n=l[0];if(!n){G("no_node_id");return}let r=(0,p.UN)().get(n);if(!r){G("node_not_found");return}if("FRAME"!==r.type){G("node_not_a_frame");return}t(n),_({onShow:async()=>{d(!0),await o(await (0,C.QZ)({nodeId:n,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),d(!1)}})}),e&&l&&x&&!s&&u?.file)?n.createElement(W,{changedNodeId:e,nodeHeight:l,complete:b,file:u.file,repo:u.repo}):null}var X=l(45137),K=l(972402),Y=l(387429),Q=l(539829),J=l(709292),Z=l(834822),ee=l(45937),et=l(481651),el=l(370715),en=l(253066),er=l(483469);function ea(){let e=(0,E.md)(Q.LZ),t=(0,K._I)(),l=(0,K.U4)(),a=(0,Y.J)(),i=(0,en.U)("upsell"),o=(0,E.Xr)(er.C),{show:s,complete:d,exportId:c,activeId:m,showing:g}=function(){let e=(0,E.md)(J.NT),t=(0,y.lS)(),{show:l,complete:n,isShowing:r,uniqueId:a}=(0,R.e)({overlay:O.Nh9,priority:I.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]),{show:i,complete:o,isShowing:s,uniqueId:d}=(0,R.e)({overlay:O.L6E,priority:I.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]);return{show:e=>"export"===e?i:l,complete:()=>r?n():o(),measureId:a,exportId:d,activeId:s?a:d,showing:s?"export":r?"measure":void 0}}();!function(e,t){let l=n.useRef(t);n.useEffect(()=>{l.current=t},[t]);let a=(0,r.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),i=n.useRef(a);n.useEffect(()=>{let e=t=>{t.key&&(window.removeEventListener("keyup",e),l.current("measure"))};a>i.current&&window.addEventListener("keyup",e)},[a]),(0,S.E)(e,"copy_as_completed",e=>{t("export")}),(0,S.E)(e,"export_completed",e=>{t("export")})}(c,n=>{s(n)({canShow:n=>!t&&l&&a&&e&&"developer"===(0,X.HB)(n),onShow:()=>{(0,Z.o9)()}})}),(0,S.E)(m,"Enter Inspect Mode",()=>{g&&d()});let p="export"===g?(0,u.tx)("upsell.dev_mode.contextual_overlay.export_title"):(0,u.tx)("upsell.dev_mode.contextual_overlay.measure_title"),_="export"===g?(0,u.tx)("upsell.dev_mode.contextual_overlay.export_description"):(0,u.tx)("upsell.dev_mode.contextual_overlay.measure_description");return n.createElement(et.X,{description:_,forceEditorTheme:"dev-handoff",isShowing:!!g,media:n.createElement(ee.y,{src:"export"===g?(0,f.ck)("2ec45ec3c5b501ef6e755fde6a2edfb39d2218cb"):(0,f.ck)("dc592aac8a3238672f1f3eb8711f656496538b15"),alt:"",aspectRatio:480/270}),onClose:d,position:el.Q.BOTTOM_RIGHT,primaryCta:{label:(0,u.tx)("upsell.dev_mode.contextual_overlay.cta"),onClick:()=>{i("handoff"),o(!0),d()},ctaTrackingDescriptor:h.c.OPEN_DEV_MODE,type:"button"},testId:"dev-mode-contextual-upsell-tooltip",title:p,trackingContextName:"Dev Mode Contextual Upsell Tooltip",width:240})}var ei=l(836402),eo=l(162796),es=l(309488),ed=l(347487),eu=l(875900),ec=l(952647),em=l(629829),eg=l(918777),ep=l(238462),eE=l(297638),e_=l(903969),eb=l(610338),ef=l(792830),ex=l(740705),ey=l(978877),eh=l(506428);let eS={container:{borderRadius:"x1mxnbhz",boxShadow:"x1wu5q8a",$$css:!0},backgroundLight:{background:"xnyijpa",$$css:!0},backgroundDark:{background:"xgnke1b",$$css:!0}};function eR(e){let t=(0,eh.DP)(),[l,r]=(0,n.useState)(0);return(0,b.h)(()=>{let t=setInterval(()=>{r(t=>(t+1)%e.steps.length)},4500);return()=>clearInterval(t)}),n.createElement("div",{...em.xk("dark"===t?eS.backgroundDark:eS.backgroundLight,eS.container)},n.createElement(ex.N,{mode:"popLayout"},n.createElement(ey.P.div,{key:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},e.steps[l])))}var ev=l(782073),eT=l(863270),ek=l(497845);let eC={container:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",alignItems:"x6s0dn4",minHeight:"x1wxaq2x",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,boxShadow:"x1wu5q8a",$$css:!0},backgroundLight:{background:"xnyijpa",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},backgroundDark:{background:"xgnke1b",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},userName:{overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",maxWidth:"x16q51m2",marginRight:"xl010v5",marginInlineStart:null,marginInlineEnd:null,$$css:!0},devHandoffIcon:{backgroundColor:"x1xtplfa",margin:"x960i20",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},textBodyMediumStrong:{...ev.g.textBodyMediumStrong,$$css:!0},bannerContent:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",alignItems:"x6s0dn4",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,minHeight:"x1wxaq2x",$$css:!0}};function eI(e){let t=e.isAnimated?{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.5,delay:.5}},exit:{opacity:0,y:-10,transition:{duration:.5}}}:void 0;return(0,u.tx)("dev_handoff.upsell.user_marked_a design",{userName:n.createElement(ek.A,{styles:eC.userName},e.statusUser.user?.name||e.statusUser.user?.handle),status:n.createElement(n.Fragment,null,n.createElement(ek.A,{isAnimated:e.isAnimated,styles:eC.devHandoffIcon,motionProps:t},n.createElement(eu.O,{style:{"--color-icon":"var(--color-icon-onbrand)"}})),n.createElement(ek.A,{isAnimated:e.isAnimated,styles:eC.textBodyMediumStrong,motionProps:t},(0,u.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev")))})}function eL(e){let t=(0,ef.W)();return e.statusUser.loading?null:n.createElement(eT.fu,{name:"Marked File Ready for Dev Animated Banner",properties:t},n.createElement(ek.L,{isAnimated:!0,styles:eC.bannerContent},n.createElement(eI,{...e,isAnimated:!0})))}function eN(e){let t=(0,ef.W)(),l=(0,eh.DP)();return e.statusUser.loading?null:n.createElement(eT.fu,{name:"Marked File Ready for Dev Banner",properties:t},n.createElement(ek.L,{styles:[eC.container,"dark"===l?eC.backgroundDark:eC.backgroundLight]},n.createElement(eI,{...e})))}var eA=l(541670),eO=l(437316),ew=l(534133),eM=l(959165),eP=l(877146),e$=l(355755),eV=l(636524),eB=l(506794),ez=l(371829);function eD(){let e=(0,y.o9)(),t=(0,e_.BI)(),l=(0,e$.aV)(),[r,a]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!l){let e=function(){let e;let t=(0,p.UN)(),l=t=>{if(t)for(let n of t.childrenNodes)(n.isTopLevelFrame()||"CANVAS"===n.type)&&(n.hasReadyStatus?e?e.getStatusInfo().lastUpdateUnixTimestamp<n.getStatusInfo().lastUpdateUnixTimestamp&&(e=n):e=n:("SECTION"===n.type||"CANVAS"===n.type)&&l(n))};return l(t?.getRoot()),e?.getStatusInfo()}();e&&a(e)}},[l]);let i=(0,eV.wW)(r&&"userId"in r?r.userId:null),o=!!r&&eg.A.unix(r.lastUpdateUnixTimestamp).isAfter((0,eg.A)().subtract(60,"day")),s=(0,en.U)("upsell"),d=(0,E.md)(Q.LZ),c=(0,K._I)(),m=(0,K.U4)(),g=(0,E.md)(J.NT),_=(0,Y.J)(),{show:b,complete:x,isShowing:h,uniqueId:v}=(0,R.e)({overlay:O.koo,priority:I.N.OVERRIDING_MODAL},[g]);(0,n.useEffect)(()=>{b({canShow:n=>_&&d&&!c&&"loaded"===t.status&&!t.hasPendingRequest&&o&&m&&!l&&("developer"===n||"software-development"===n||e(n)),onShow:()=>{(0,Z.o9)()}})},[b,c,m,d,l,g,_,t,o,e]),(0,S.E)(v,"Enter Inspect Mode",()=>{h&&x()});let T=(0,ew.BC)({dismissModal:x,onRequestAccess:()=>{s("handoff")}}),k=n.useCallback(()=>{x(),T.hidden||T.onClick(eP.i$.Upsell)},[x,T]),C=n.createElement(n.Fragment,null,n.createElement("span",{className:ez.XQ},n.createElement(eu.O,null)),n.createElement("span",{className:eE.s.textBodyMediumStrong.$},(0,u.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev"))),L=n.createElement(eA.H,null),N=(0,ef.W)(),A=eo.hS({open:!0,onClose:ep.lQ,preventUserClose:!0,recordingKey:"dev-mode-paywall-modal"}),w=(0,y.uf)(),M=h&&w();return n.createElement(eB.M,{testId:"rfd-upsell-upsell",isShowing:h},n.createElement(ec.J,{brand:"dev-handoff"},n.createElement(eb.OM,null),n.createElement(eT.fu,{name:"RFD Upsell Modal",properties:N,enabled:N?.gracePeriod!==void 0},n.createElement(es.bL,{width:392,manager:A},n.createElement(ed.Wk,null,"control"===M&&n.createElement("div",{className:ez.XV},n.createElement("div",{className:"xh8yej3 xysyzu8 x1xk1jr8 x1sdyfia"},i.loading?"":(0,u.tx)("dev_handoff.upsell.user_marked_a design",{userName:n.createElement("span",{className:"xb3r6kr xlyipyv xuxw1ft"},i.user?.name||i.user?.handle),status:C}))),n.createElement("div",{className:eE.s.py8.px16.$},n.createElement(eO.E,{imgSrc:(0,f.ck)("6d5e9cb0e9ec7fd5dd58425c5527dc8a78143a19"),content:L,modalType:"RFD Upsell Modal",primaryButtonLabel:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.request_access"),primaryButtonType:"request_access",primaryButtonOnClick:T.hidden?void 0:k,secondaryButtonLabel:(0,u.tx)("dev_handoff.paywall.blocking_modal.button.not_now"),secondaryButtonType:"not_now",secondaryButtonOnClick:x}))),"rfd_banner_only"===M&&n.createElement(ed.vo,{className:"x1xmf6yo xh8yej3"},n.createElement(ed.nB,{padding:0},n.createElement(eN,{statusUser:i}))),"banner_carousel"===M&&n.createElement(ed.vo,{className:"x1xmf6yo xh8yej3"},n.createElement(ed.nB,{padding:0,scrolling:"none"},n.createElement(eR,{steps:[n.createElement(eL,{statusUser:i,key:"rfd-banner"}),n.createElement(eM.G,{isAnimated:!0,key:"social-proof"})]})))))))}var eF=l(363367),eU=l(361964),eH=l(813147),eG=l(643841),ej=l(702038),eW=l(14837),eq=l(7148),eX=l(413238),eK=l(258539),eY=l(554326),eQ=l(810807),eJ=l(661289),eZ=l(870545),e0=l(377849),e1=l(837988),e5=l(413633),e8=l(637640),e7=l(972382),e6=l(633468),e4=l(230618),e3=l(642775);function e2({onClick:e,complete:t}){let l=(0,o.k)().dev_mode_demo_test_name_change;return n.createElement(g.v,{mode:"dev-handoff"},n.createElement("div",{"data-testid":"dev-mode-demo-file-entrypoint-popup",className:"x6sy6il x1dgp85l xqyf9gi x1mxnbhz x1xtplfa x10l6tqk xrv6xtj x9f619 x1p3pnes x1tk3asg x78zum5 xdt5ytf x1dipnxa xbj06nx xl56j7k x1i71x30"},n.createElement("div",{className:"x10l6tqk x1psp13h xbyvkye"},n.createElement(e3.Jn,{emphasized:!0,onClick:t})),n.createElement("div",null,n.createElement("div",{className:"x13saxwh xg4jxnz x1h94l6n x1uvdjgy x39l7i4 x1ihwiht"},(0,u.tx)("dev_mode_playground_file.still_curious_about_dev_mode")),n.createElement("div",null,l?(0,u.tx)("dev_mode_demo_file.check_out_our_interactive_test"):(0,u.tx)("dev_mode_playground_file.check_out_our_interactive_demo"))),n.createElement(x.e6,{trackingProperties:{trackingDescriptor:h.c.DEMO_FILE_THUMBNAIL},onClick:e,className:"x11g6tue xzjbwwf x3w9dv2"},n.createElement(e4.oW,{className:"xb3r6kr",alt:"A graphic showing the demo file thumbnail",src:l?(0,f.ck)("eab479b46c1a94910464200211143d64fe917ae1"):(0,f.ck)("5ab0c821447dbae8157453a07fcd1bdd94180345")})),n.createElement("div",null,n.createElement(x.e6,{trackingProperties:{trackingDescriptor:h.c.CHECK_IT_OUT},onClick:e,className:"x1iakgj3 x19y5rnk x78zum5 xx99whi xl56j7k x6s0dn4 x4wtjwi x11g6tue x1qxcl5b x1tk3asg"},(0,u.tx)("dev_mode_playground_file.check_it_out")))))}function e9(){let e=(0,y.lb)(),t=(0,K._I)(),l=(0,K.U4)(),r=(0,e7.w)(),a=(0,E.md)(eb.YU),i=(0,e_.BI)(),o=(0,f.tl)().dev_mode_demo_file_key,{isShowing:s,show:d,complete:u}=(0,R.e)({overlay:O.E5y,priority:I.N.DEFAULT_MODAL,experiment:{check:e,predicate:e=>e,postCheck:()=>!0}});return(n.useEffect(()=>{d({canShow:()=>!!("loaded"===i.status&&!i.hasPendingRequest&&l&&!t&&a&&"developer"===r&&o)})},[t,l,o,i,s,r,a,d]),s)?n.createElement(eB.M,{isShowing:s},n.createElement(eT.fu,{name:"DevModeDemoFileEntryPoint"},n.createElement(e2,{onClick:()=>{o&&e8.Ay.redirect((0,e6.jN)({file:{key:o},isDevHandoff:!0}),"_blank"),u()},complete:u}))):null}var te=l(468325),tt=l(115044),tl=l(533737),tn=l(696786),tr=l(961675),ta=l(517776),ti=l(887836),to=l(859480),ts=l(730143),td=l(125761),tu=l(752181),tc=l(543177),tm=l(614092),tg=l(226455),tp=l(954703),tE=l(124810),t_=l(536384),tb=l.n(t_),tf=l(329228),tx=l(50429),ty=l(66699),th=l(27382),tS=l(566841),tR=l(686464),tv=l(152545),tT=l(378662),tk=l(228845),tC=l(477810),tI=l(546021),tL=l(707790),tN=l(923659);let tA="starting_points_templates_modal--templateOption--qYXkm",tO="starting_points_templates_modal--templateOptionTitle--DmVPR",tw="starting_points_templates_modal--verticalTemplateImage--kAzQz";var tM=(e=>(e.DESKTOP="desktop",e.MOBILE="mobile",e.WEBSITE="website",e))(tM||{});let tP={x:0,y:0},t$={website:{x:0,y:1600},mobile:{x:0,y:300},desktop:{x:0,y:300}},tV={website:.1,mobile:.225,desktop:.1},tB=e=>{let t=(0,f.Ay)().starting_points;switch(e){case"basics":return t?.figma_basics_hub_file_id;case"desktop":return t?.desktop_templates_hub_file_id;case"mobile":return t?.mobile_templates_hub_file_id;case"website":return t?.website_templates_hub_file_id}};function tz({onClose:e}){let t=(0,r.wA)(),l=n.useRef(null),[a,s]=n.useState(!1),[d,c]=n.useState(!1),[m,g]=n.useState(!1),[p,x]=n.useState(!1),[y,S]=n.useState(window.innerWidth),R=(0,tR.q)(),v=(0,ts.tS)(),T=(0,r.d4)(e=>e.fileVersion),k=(0,r.d4)(e=>e.mirror.sceneGraph),C=R&&(0,tI.Qf)(k),I=!!C&&0===C.childCount,[L]=(0,tf.IT)((0,th.tH)({})),{inProductHelpViewType:N}=(0,tT.A5)(),A=(0,eY.ut)(i.Ez5?.uiState().inProductHelpSidePanelWidth,0),O="side_panel"===N?A:0,{insertTemplate:w}=(0,tS.Fz)(),M=(0,tL.g)(),P=(0,E.Xr)(tN.Yq),$=(0,E.Xr)(tN.bj),[V,B]=n.useState(!1),z=(0,tk.GQ)(),D=(0,tC.P)();(0,b.h)(()=>{let e=()=>{S(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),n.useEffect(()=>{x(z+50>y/2-257||y-D-O-50<y/2+257),g(z+50>y/2-365||y-D-O-50<y/2+365)},[O,z,D,y]);let F=n.useCallback(()=>{if("loaded"!==L.status||!L.data)return;let e=[];for(let t of Object.values(tM)){let l=tB(t);if(!l)return;let n=L.data[l];if(!n)return;let r={type:tv.n.HubFile,template:n};e.push(r)}Promise.all(e.map(e=>E.zl.get((0,tN.Re)({fileKey:v,fileVersion:T,template:e})))).then(()=>{B(!0)}).catch(e=>{console.error("Failed to load template buffers",e),B(!0)})},[v,T,L]);if(n.useEffect(()=>{"loaded"!==L.status||V||F()},[L,V,F]),n.useEffect(()=>{R&&C&&!I&&!d&&e()},[R,C,I,d,e]),!(0,o.k)().starting_points_modal)return null;let U=async l=>{if("loaded"!==L.status)return;s(!0);let n=tB(l);if(!n)return;let r=L.data[n];r&&("basics"!==l?await (0,tS.Zg)({insert:()=>$({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:i.zkO.USER}),template:{template:r,type:tv.n.HubFile},fileKey:v,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1}):await w({template:{template:r,type:tv.n.HubFile},userTriggered:!1,editScopeType:i.zkO.ONBOARDING,triggeredFrom:"starting-points",templateInsertionDirection:i.hKj.RIGHT}),"basics"===l?(0,ty.YQ)({id:"starting_points_basics_template_inserted"}):(0,ty.YQ)({id:"starting_points_template_inserted"}),e(),s(!1))},H=n.createElement(eT.$z,{onClick:()=>U("basics"),trackingProperties:{trackingDescriptor:h.c.LEARN_THE_BASICS}},(0,u.tx)("starting_points.learn_the_basics")),G=e=>{(0,_.sx)("Starting Points Template Option Hover",{template:e});let l=tB(e);if(!l||!L.data)return;let n=L.data[l];if(!n)return;let r={type:tv.n.HubFile,template:n},a=tV[e];window.innerWidth>1700&&(a*=1.5),(0,tS.Zg)({insert:()=>M(r,{moveViewportAfterPreview:!0,priority:"user-visible",previewManager:{nodeType:i.Z6A.CANVAS},position:tP,viewportOptions:{position:t$[e],scale:a,duration:0}}),template:r,fileKey:v,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1,isPreview:!0})};return n.createElement(eT.fu,{name:"Starting Points Modal"},n.createElement("div",{className:"starting_points_templates_modal--startingPointsTemplatesModalPositioner--R8g3u",style:{marginRight:`${O}px`}},n.createElement(tx.x,{isLoading:a,className:"starting_points_templates_modal--loadingSpinner--UOrjg"},()=>n.createElement("div",{className:tb()({"starting_points_templates_modal--startingPointsTemplatesModal--dUQte":!0,"starting_points_templates_modal--isHidden--jVN1L":p,"starting_points_templates_modal--isCondensedView--3tVz6":m}),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),ref:l},n.createElement("div",{className:"starting_points_templates_modal--modalInstructions--ZtdTL"},n.createElement("div",{className:"starting_points_templates_modal--modalTitle--HT3eZ"},(0,u.t)("starting_points.what_do_you_want_to_make_today")),n.createElement("div",{className:"starting_points_templates_modal--modalLearnMore--g-GWo"},(0,u.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:H}))),n.createElement("div",{className:"starting_points_templates_modal--optionContainer--mYEsG"},n.createElement(eT.$z,{className:tA,onClick:()=>U("website"),onMouseEnter:()=>G("website"),onMouseLeave:P,trackingProperties:{trackingDescriptor:h.c.WEBSITE_TEMPLATES}},n.createElement("div",{className:tO},(0,u.t)("starting_points.website")),n.createElement(e4.oW,{className:tw,src:(0,f.ck)("9b8475fdab7c1ed3cd1c0d16b957d65a80840b74"),alt:"Website template"})),n.createElement(eT.$z,{className:tA,onClick:()=>U("mobile"),onMouseEnter:()=>G("mobile"),onMouseLeave:P,trackingProperties:{trackingDescriptor:h.c.MOBILE_APP_TEMPLATES}},n.createElement("div",{className:tO},(0,u.t)("starting_points.mobile_app")),n.createElement(e4.oW,{className:tw,src:(0,f.ck)("b262e57bed515b9f0da45ae54fa43824d9704c14"),alt:"Mobile app template"})),n.createElement(eT.$z,{className:tA,onClick:()=>U("desktop"),onMouseEnter:()=>G("desktop"),onMouseLeave:P,trackingProperties:{trackingDescriptor:h.c.DESKTOP_APP_TEMPLATES}},n.createElement("div",{className:tO},(0,u.t)("starting_points.desktop_app")),n.createElement(e4.oW,{className:"starting_points_templates_modal--desktopTemplateImage--3kplg",src:(0,f.ck)("cb2f715253dacb4e7d3fb211ff2792fc28a38832"),alt:"Desktop app template"}))),n.createElement("div",{className:"starting_points_templates_modal--modalLearnMoreFooter--pSvfX"},(0,u.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:H})),n.createElement("div",{className:"starting_points_templates_modal--closeButton--io-14"},n.createElement(tp.K,{onClick:e,"aria-label":(0,u.t)("general.close"),htmlAttributes:{"data-testid":"close-button"}},n.createElement(tE.A,null)))))))}let tD=(0,ta.r1)("dismissed_starting_points_templates_modal");function tF(){let e=(0,r.wA)(),t=!!(0,o.k)().starting_points_modal,l=(0,y.GM)(),a=(0,tr.QL)(tg.E_.key)===tg.E_.value,i=(0,e$.aV)(),s=(0,r.d4)(e=>e.mirror.appModel.currentPage),d=(0,tm.Fk)((e,t)=>(0,to.zC)(e,t),s),u=(0,tr.QL)(tc.pt.KEY)===tc.pt.VALUE,c=(0,ts.q5)(),m=(0,td.TA)(),g=c?.creatorId===m,p=(0,E.md)(J.Fy),_=(0,E.md)(ti.UQ),b=!(0,tu.f)("not_gen_0"),x=(0,tn.GS)(),h=(0,E.md)(tD),S=(0,f.Ay)().starting_points,{show:v,isShowing:T,complete:k}=(0,R.e)({overlay:O.EYw,priority:I.N.OVERRIDING_MODAL+1,experiment:{check:l,predicate:e=>e,postCheck:(e,t)=>!t}},[p,h]);return(n.useEffect(()=>{t&&g&&!u&&!i&&d&&!T&&(a?v():b&&_&&x&&S&&v({canShow:e=>!e}))},[t,g,i,d,T,a,b,_,x,u,S,v]),T)?n.createElement(tz,{onClose:()=>{h.data||e(tl.b({dismissed_starting_points_templates_modal:!0})),k()}}):null}var tU=l(118287),tH=l(244534),tG=l(265098),tj=l(526594),tW=l(295156),tq=l(161245),tX=l(437973),tK=l(257264);let tY=(0,tK.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,tK.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===O.KTt.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]}),tQ=(0,tK.rn)("track_ui3_onboarding_shown",tY);var tJ=l(876326);function tZ(){let{isShowing:e,complete:t,show:l,uniqueId:a}=(0,R.e)({overlay:O.l_p,priority:I.N.SECONDARY_MODAL}),o=(0,r.wA)(),s=(0,e$.aV)(),d=(0,ts.q5)(),c=(0,td.iZ)(),m=(0,tU.te)(),g=!!(0,tu.f)(tq.bo),p="ui3_onboarding_was_shown_in_current_session"===(0,tG.zl)(tQ).currentState,_="no_figma_basics_onboarding_was_shown_in_current_session"===(0,tG.zl)(tX.j).currentState,b=(0,E.md)(tW.dL),f=(0,tj.jO)(),x=d?.canEdit,y=(0,r.d4)(e=>e.leftPanel.activeTab===i.xae.LAYERS);if((0,S.E)(a,["Reset Visual Assets Tooltips",tq.io],()=>{c&&d&&o(tl.b(tJ.g))}),(0,n.useEffect)(()=>{!m()||!x||b||g||p||_||!f||s||!y||e||l()},[l,m,x,g,f,s,p,_,e,b,y]),(0,n.useEffect)(()=>{!y&&e&&t()},[y,e,t]),!e)return null;let v=n.createElement("strong",{style:{display:"contents"}},(0,u.tx)("design_systems.assets_panel.assets"));return n.createElement(et.X,{isShowing:e,title:(0,u.tx)("rcs.visual_assets.elevate_your_designs"),description:(0,u.tx)("rcs.visual_assets.grab_visual_assets",{strongAssets:v}),primaryCta:{label:(0,u.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{o(tH.FP({tab:i.xae.ASSETS})),t()},ctaTrackingDescriptor:h.c.PRESETS_TRY_IT},trackingContextName:"Visual Assets Intro Tooltip",userFlagOnShow:tq.bo,position:el.Q.UI3_EDITOR_TOP_LEFT,onClose:t})}var t0=l(577796),t1=l(763716),t5=l(511067),t8=l(391301),t7=l(971845),t6=l(689329),t4=l(286803),t3=l(566090),t2=l(175393),t9=l(23373);let le=new Date("2025-03-05");function lt(){let e=(0,E.md)(J.mp),t=(0,e$.p8)("isReadOnly"),l=(0,e$.aV)(),r=(0,K._I)(),a=(0,tn.GS)(),{uniqueId:i,show:o,isShowing:s,complete:d}=(0,R.e)({overlay:O.k2l,priority:I.N.SECONDARY_MODAL},[e]),c=(0,n.useCallback)(()=>{l||t||!r||o({canShow:e=>e.getTime()<=le.getTime()&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(e)})},[l,o,t,r]),m=(0,t5.Um)(),g=m?.type===(0,t4.Tm)(t3.tD.name),p=m?.type===(0,t1.mb)(t7.M.CommentTools);return(0,n.useEffect)(()=>{a||c()},[c,a]),(0,n.useEffect)(()=>{(g||p)&&d()},[g,p,d]),(0,S.E)(i,(0,t6.wX)("design"),()=>{c()}),n.createElement(t8.rq,{arrowPosition:t2.F_.BOTTOM,clickOutsideToHide:!0,description:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.body"),isShowing:s,media:n.createElement(ee.y,{src:(0,f.ck)("f93933f2cfd98d5f79223a25cab05b4ffacb0ec7"),alt:(0,u.t)("dev_handoff.annotations.tool_in_editor_onboarding.image_alt"),aspectRatio:1200/675}),onClose:d,primaryCta:{type:"button",label:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.primary_cta_label"),onClick:d,ctaTrackingDescriptor:h.c.GOT_IT},targetKey:a?t9.G:t3.tD.name,title:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.title"),trackingContextName:"Annotation Tools In Editor Onboarding",width:240})}var ll=l(306152),ln=l(226601),lr=l(621451),la=l(354733),li=l(251776),lo=l(79083),ls=l(227276),ld=l(438071),lu=l(788903),lc=l(277454),lm=l(240237),lg=l(516300),lp=l(483656),lE=l(728536),l_=l(612363),lb=l(815347);function lf(){let e=(0,n.useRef)(!1),t=function(){let[e,t]=(0,n.useState)(!1),l=(0,n.useRef)(null),r=(0,E.md)(ln.u2);return(0,n.useEffect)(()=>{if(r===lo.td.DETECTION_REQUESTED){t(!1),l.current=performance.now();return}if(r===lo.td.IDLE&&(t(!0),l.current)){let e=performance.now()-l.current;E.zl.set(la.eF,e)}},[r]),e}(),{status:l}=(0,E.md)(ln.v4),r=["uninitialized","loading"].includes(l);return(0,n.useEffect)(()=>{e.current||r||(e.current=!0)},[r]),!t||!e.current}var lx=l(531788),ly=l(128080),lh=l.n(ly),lS=l(320005),lR=l(781239),lv=l(540698),lT=l(880801),lk=l(697587),lC=l(622518),lI=l(956265),lL=l(773511),lN=l(869143),lA=l(805353),lO=l.n(lA),lw=l(561258),lM=l(130768),lP=l(906419),l$=l(368112),lV=l(182317),lB=l(4881),lz=l(69658),lD=l(127711),lF=l(342878),lU=l(439796);let lH=(0,lB.Wh)(()=>(0,E.eU)(null)),lG=(0,lB.Wh)(()=>(0,E.eU)(e=>e(lH),(e,t,l)=>{t(lH,l)})),lj=(0,lB.Wh)(()=>(0,E.eU)(null)),lW=(0,lB.Wh)(()=>(0,E.eU)(null)),lq=(0,E.eU)(!1),lX=(0,E.eU)(null),lK=(0,E.Iz)(e=>(0,E.eU)(t=>{let{libraryVariables:l}=t(ln.v4),n=t(lU.uk),{localVariableSets:r,libraryVariableSets:a}=t(ln.mn),o=t(lz.$p)??[],s={};n.forEach(t=>{"LOCAL"===t.subscriptionStatus&&t.resolvedType===e.type&&(s[t.node_id]=t)}),l.forEach(t=>{"LIBRARY"===t.subscriptionStatus&&t.resolvedType===e.type&&(s[t.node_id]=t)});let d={};o.forEach(e=>{d[e.libraryKey]=e.name});let u=Object.values(s).filter(t=>t.resolvedType===e.type).filter(t=>t.scopes.some(t=>e.scopes.includes(t)||t===i.j0r.ALL_SCOPES));return{allVariableListItems:(0,l$.dC)({variables:u,variableSets:[...Object.values(r),...Object.values(a)],styles:[],componentProps:[],layout:"list",fileNamesByLibraryKey:d,openFileLibraryKey:t(ts._S),collapsedLibraryKeys:new Set,slideThemeId:null}).reduce((e,t)=>{switch(t.type){case l$.Yc.VARIABLES:let l=t.items[0],n=t.variableSet;l&&n&&e.push({id:l.node_id,variable:l,type:"LIST",variableSet:n,isSuggestion:!1});break;case l$.Yc.SEPARATOR:e.push({id:(0,lV.g)(),type:"LIST_SEPARATOR"});break;case l$.Yc.SECTION_HEADER:e.push({id:(0,lV.g)(),type:"LIST_SECTION_HEADER",name:t.name,fileName:t.fileName,secondaryText:t.secondaryText});break;case l$.Yc.HIERARCHY_PATH:e.push({id:(0,lV.g)(),type:"LIST_HIERARCHY_PATH",label:t.name})}return e},[]),variableMap:s,localVariableSetIdToSet:r,libraryVariableSetIdToSet:a,localVariables:n,libraryVariables:l}}),(e,t)=>lh()(e.type,t.type)&&lh()(e.scopes,t.scopes)),lY=(0,E.eU)(e=>{let{subscribedStylesByFileKey:t,localStyles:l}=e(ln.jq),n=new lD.V(!0);if(l){let{sortedPrefixes:e,stylesByPrefix:t}=(0,lc.uJ)(l.styles);n.addLibraryStyleItemsToResult(e,t,l.fileKey,l.libraryKey)}for(let[e,l]of Object.entries(t)){let{sortedPrefixes:t,stylesByPrefix:r}=(0,lc.uJ)(l.styles);n.addLibraryStyleItemsToResult(t,r,e,l.libraryKey,l.fileName)}return function(e){let t=[];return{listItems:e.reduce((e,l)=>{switch(l.type){case lF.b.StylesRow:{let n=l.styles[0];if(!n)break;let{node_id:r}=n;e.push({id:r,type:"TEXT_STYLE_LIST",style:n,isSuggestion:!1}),t.push(n);break}case lF.b.Separator:e.push({id:(0,lV.g)(),type:"LIST_SEPARATOR"});break;case lF.b.LibraryName:e.push({id:(0,lV.g)(),type:"LIST_SECTION_HEADER",name:l.name});break;case lF.b.HierarchyPathName:e.push({id:(0,lV.g)(),type:"LIST_HIERARCHY_PATH",label:l.name})}return e},[]),allStyles:t}}(n.getResult())});var lQ=l(323010);let lJ="16px",lZ="design_linter_suggestions_modal--spacer--cOcTq";function l0(){let e=(0,E.Xr)(lX),t=(0,E.Xr)(lq),l=(0,E.Xr)(lG),r=(0,E.Xr)(lj),a=(0,E.Xr)(lW);return(0,n.useMemo)(()=>lO()(()=>{e(null),t(!1),l(null),r(null),a(null)},100),[e,t,l,r,a])}function l1(){return(0,E.md)(lq)?n.createElement(l5,null):null}function l5(){let[e,t]=(0,n.useState)(""),[l,r]=(0,n.useState)(""),a=(0,E.md)(lX),i=(0,E.md)(lG)??{title:"",emptyLabel:"",display:"GRID",items:[]},o=l0(),s=a?.current?.getBoundingClientRect()??{x:0,y:0,width:0,height:0},d=(0,n.useMemo)(()=>({x:s.x+("LIST"===i.display?s.width:0),y:s.y+("GRID"===i.display?s.height:0)}),[s.y,s.x,s.height,s.width,i.display]);(0,n.useEffect)(()=>{let t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e]);let c=(0,u.t)("design_linter.dropdown.search_placeholder"),m=(0,n.useRef)(null);return n.createElement(lC.bL,{width:260,maxHeight:320,onClose:o,defaultPosition:d},n.createElement(ed.vo,null,n.createElement(l8,null,n.createElement(ed.hE,null,i.title),n.createElement(lI.p,{type:"search",size:"md",placeholder:c,ref:m,id:c,value:e,onChange:e=>t(e)})),n.createElement(ed.nB,{scrolling:"none",padding:0},n.createElement(l7,{items:i.items,display:i.display,searchQuery:l}))))}function l8({children:e}){return n.createElement("div",{className:"design_linter_suggestions_modal--header--XSpwy","data-fpl-header":!0},e)}function l7({items:e,display:t,searchQuery:l}){let r=(0,E.md)(lj)??ep.lQ,a=(0,E.md)(lW)??(()=>!1);return"GRID"===t?n.createElement(l3,{items:e,onSelection:r,checkIsSelected:a}):n.createElement(l6,{items:e,searchQuery:l,onSelection:r,checkIsSelected:a})}function l6({items:e,searchQuery:t,onSelection:l,checkIsSelected:r}){let a="design-linter-dropdown",i=(0,n.useRef)(null),[o,s]=(0,n.useState)(null),d=(0,n.useCallback)(e=>{s(e)},[s]),c=(0,n.useCallback)(e=>{o===e&&s(null)},[o,s]),m=l0(),g=(0,n.useCallback)(e=>{l&&l(e)},[l]),p=!0,E=(0,n.useMemo)(()=>e.filter(e=>{let l=t.toLocaleLowerCase();switch(e.type){case"LIST":if(""!==l&&(e.isSuggestion||!e.variable.name.toLocaleLowerCase().includes(l)))return!1;break;case"TEXT_STYLE_LIST":if(""!==l&&(e.isSuggestion||!e.style.name.toLocaleLowerCase().includes(l)&&!e.style.description?.toLocaleLowerCase().includes(l)))return!1;break;case"LIST_HIERARCHY_PATH":case"LIST_SECTION_HEADER":case"LIST_SEPARATOR":if(""!==t)return!1;break;default:return!1}return!0}),[e,t]),_=(0,n.useCallback)(e=>{let t=E[e];return t?`${e}-${t.id}`:""},[E]),b=(0,n.useCallback)(()=>i.current,[i]),f=(0,lN.Te)({count:E.length,estimateSize:()=>33,getItemKey:_,getScrollElement:b,overscan:5});return(0,n.useEffect)(()=>{let e=E.findIndex(e=>r(e))??-1;e>=0&&f.scrollToIndex(e,{align:"center"})},[r,E,f]),n.createElement(lw.dP,{recordingKey:a},E.length>0?n.createElement("div",{ref:i,className:"xysyzu8",style:{height:`${Math.min(f.getTotalSize()+8,248)}px`}},n.createElement("div",{className:"x1n2onr6",style:{height:`${f.getTotalSize()+8}px`}},f.getVirtualItems().map(e=>{let{index:t}=e,l=[1,t],i=E[t];if(!i)return null;p=!1;let s=!!r&&r(i);return n.createElement("div",{key:e.key,className:"x10l6tqk x13vifvy xu96u03 xh8yej3",style:{height:`${e.size}px`,transform:`translateY(${e.start}px)`}},n.createElement(l4,{isHighlighted:!f.isScrolling&&o===t,isSelected:s,keyboardNavigationPath:l,listItem:i,onItemHighlight:()=>{d(t)},onItemMouseLeave:()=>{c(t)},onItemSelect:()=>{"variable"in i&&g(i.variable.node_id),"style"in i&&g(i.style.node_id),m()},recordingKey:lR.Pt(a,`${"variable"in i?i.variable.id:t}`)}))}))):null,p?n.createElement("div",{className:"x78zum5 xl56j7k x6s0dn4 x84pvj6 x87ps6o",style:{height:(0,l$.Ih)({layout:"list"})}},(0,u.t)("variables.binding_ui.no_search_results")):null)}let l4=n.memo(function({isHighlighted:e,isSelected:t,keyboardNavigationPath:l,listItem:r,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,recordingKey:s}){switch(r.type){case"LIST":return n.createElement("div",{className:eE.s.bRadius5.overflowHidden.mt8.mb4.ml8.mr8.$},n.createElement(lP._J,{key:r.id,disabledVariableIds:new Set,isHighlighted:e,isSelected:t,keyboardNavigationPath:l,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,pickerType:"fields",recordingKey:s,variable:r.variable,variableSet:r.variableSet}));case"TEXT_STYLE_LIST":return n.createElement("div",{className:tb()(eE.s.bRadius5.overflowHidden.mt8.ml8.mr8.$,"design_linter_suggestions_modal--dropdownRow--i801b")},n.createElement(lM.m3,{dsStyle:r.style,additionalClassName:eE.s.flex.wFull.$},n.createElement(lP.DL,{dsStyle:r.style,hideContextMenu:!0,isHighlighted:e,isSelected:t,keyboardNavigationPath:l,onItemContextMenu:i,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,recordingKey:s})));case"LIST_SEPARATOR":return n.createElement("div",{className:tb()(lQ.me,"design_linter_suggestions_modal--separator--CnjLD")});case"LIST_SECTION_HEADER":return n.createElement("div",{className:lZ},n.createElement(lP.KL,{groupName:r.name,fileName:r.fileName,secondaryText:r.secondaryText}));case"LIST_HIERARCHY_PATH":return n.createElement("div",{className:lZ},n.createElement(lP.Tg,{groupName:r.label}));default:return null}});function l3({items:e,onSelection:t,checkIsSelected:l}){let r=l0(),a=(0,n.useCallback)(e=>{t(e)},[t]),i=eE.s.flex.justifyCenter.itemsCenter.colorBgSecondary.selectNone.bRadius5.$,o=eE.s.b2.colorBorderSelected.$;return n.createElement("div",{className:eE.s.grid.borderBox.gridTemplateColumns2.mt8.mb8.ml16.$},e.map(e=>{let t=!!l&&l(e);return"GRID"===e.type?n.createElement("div",{key:e.id,className:eE.s.textBodyMedium.colorText.truncate.selectNone.mt8.mr16.mb8.$},n.createElement(lL.E,{className:tb()("design_linter_suggestions_modal--thumbnailContainer--mBL-q",i,t?o:null),onClick:()=>{a(e.id),r()}},n.createElement(e4.oW,{src:e.thumbnail_url,alt:e.name})),n.createElement("h3",{className:eE.s.truncate.mt2.$},e.name)):null}))}var l2=l(403451),l9=l(88009),ne=l(882839);function nt(){let{isLibraryModalShown:e,onToggleLibraryModal:t}=(0,l2.u)({entrypoint:ne.r6.DESIGN_LINTER,modalType:"editor",initialTab:l9.Wv.LIBRARIES}),l=(0,n.useCallback)(()=>{i.Ez5?.uiState().showDesignLinter.set(!1),e||t()},[e,t]);return n.createElement("div",{...em.Ay.props(nl.box)},(0,u.tx)("design_linter.library_selector.no_libraries"),n.createElement(lx.$n,{onClick:l},(0,u.tx)("design_linter.library_selector.manage_libraries")))}let nl={box:{display:"x78zum5",alignItems:"x6s0dn4",padding:"x1pcupwp",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x1nfngrj",rowGap:null,columnGap:null,borderRadius:"x1sxf85j",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1v8gsql",...ev.g.textBodyMedium,$$css:!0}};var nn=l(837983),nr=l(134611),na=l(283622);function ni(e){return(0,n.useMemo)(()=>"loaded"===e.status?{...e,data:e.data.filter(e=>e.num_variables>0||e.num_styles>0)}:e,[e])}function no(e){return(0,n.useMemo)(()=>{if("loaded"===e.status)return 0===e.data.length?lo.oV.EMPTY:lo.oV.CONTENT;if("errors"===e.status||"disabled"===e.status);else if("loading"===e.status)return lo.oV.LOADING;return lo.oV.ERROR},[e])}var ns=l(544405),nd=l(584978),nu=l(334804),nc=l(903832),nm=l(181243),ng=l(799272),np=l(376852),nE=l(48908);function n_({numPlaceholderLibraries:e}){return n.createElement(n.Fragment,null,(0,np.y1)(e).map(e=>n.createElement(nb,{key:e})))}function nb(){let e={opacity:50,animationType:nE.JR.SHIMMER};return n.createElement("div",{className:"x78zum5 x6s0dn4 x9f619 x1ef8nbk x17f4yl9 x1bamp8i x19y5rnk xh8yej3 x1nfngrj"},n.createElement(nE.Qp,{className:"x1exxlbk xnnlda6 x1ino65a x19y5rnk",...e})," ",n.createElement("div",{className:"x98rzlu x78zum5 xdt5ytf x1nfngrj"},n.createElement(nE.Wi,{className:"xygnafs",...e}),n.createElement(nE.Wi,{className:"x1dmp6jm",...e})),n.createElement(nd.W,{id:"loading",disabled:!0}))}function nf({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o}){let s=n.useCallback((e,t)=>{i(l=>({...l,[e]:t}))},[i]),d=n.useCallback((e,t)=>{o(l=>({...l,[e]:t}))},[o]);return n.createElement(n.Fragment,null,n.createElement(nx,{subscribedLibraries:e,subscribedLibrariesStatus:l,checkedStates:a,setLibraryCheckedState:s}),n.createElement(ny,{usedInThisFile:t,usedInThisFileStatus:r,checkedStates:a,setLibraryCheckedState:s,setLibrarySubscribeCallback:d}))}function nx({subscribedLibraries:e,subscribedLibrariesStatus:t,checkedStates:l,setLibraryCheckedState:r}){return t===lo.oV.LOADING?n.createElement(n_,{numPlaceholderLibraries:2}):t===lo.oV.CONTENT?n.createElement(n.Fragment,null,e?.data?.map((e,t)=>n.createElement("div",{"data-testid":`design-linter-subscribed-library-item-${t}`,key:e.library_key},n.createElement(nh,{library:e,checked:l[e.library_key]||!1,setChecked:t=>r(e.library_key,t)})))):null}function ny({usedInThisFile:e,usedInThisFileStatus:t,checkedStates:l,setLibraryCheckedState:r,setLibrarySubscribeCallback:a}){return t===lo.oV.LOADING?n.createElement(n_,{numPlaceholderLibraries:1}):t===lo.oV.CONTENT?n.createElement(n.Fragment,null,e.data?.map((e,t)=>n.createElement("div",{"data-testid":`design-linter-in-file-library-item-${t}`,key:e.library_key},n.createElement(nh,{library:e,checked:l[e.library_key]||!1,setChecked:t=>r(e.library_key,t),setLibrarySubscribeCallback:a})))):null}function nh({library:e,checked:t,setChecked:l,setLibrarySubscribeCallback:r}){let{subscribe:a}=(0,nc._)(e);return n.createElement("div",{...em.Ay.props(nR.listItem,t&&nR.selectedListItem)},n.createElement(ns.J,{className:"xgqk73l",htmlFor:e.library_key},n.createElement(nS,{library:e})),n.createElement("div",{className:"x8x9d4c"},n.createElement(nd.W,{id:e.library_key,checked:t,onChange:t=>{l(t),r?.(e.library_key,a)}})))}function nS({library:e}){let t=(0,l9.P2)(e),l=!t||null!==e.thumbnail_guid,r=t?e.team_name:e.community_author_name;return n.createElement("div",{className:"x78zum5 x6s0dn4 x1nfngrj"},n.createElement(nm.D,{thumbnailUrl:e.thumbnail_url,coverThumbnail:l,name:e.library_name}),n.createElement("div",{className:"x98rzlu x78zum5 xdt5ytf"},n.createElement("span",{...em.Ay.props(nR.listItemHeader)},n.createElement(ng.C,{publishedLibrary:e})),r&&n.createElement(nu.G,{...em.Ay.props(nR.listItemSubheader),text:r})))}let nR={listItem:{display:"x78zum5",position:"x1n2onr6",alignItems:"x6s0dn4",textAlign:"xdpxx8g",color:"x1akne3o",boxSizing:"x9f619",marginBottom:"x1ef8nbk",padding:"x17f4yl9",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,border:"x1bamp8i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1yjdb4r xv2f06h",$$css:!0},selectedListItem:{borderColor:"x1va2ikv",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},listItemHeader:{...ev.g.textBodyMedium,width:"x1oysuqx",$$css:!0},listItemSubheader:{...ev.g.textBodyMedium,color:"x1n0bwc9",width:"x1oysuqx",$$css:!0}};var nv=l(133595);function nT(){let e="design-linter-library-selector",[t,l]=(0,E.fp)(l_._M),r=()=>{t===lo.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW?l(lo.FR.ALL_VISUAL_GROUPS_VIEW):t===lo.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW?l(lo.FR.SELECTED_VISUAL_GROUP_VIEW):i.Ez5?.uiState().showDesignLinter.set(!1)},a=eo.hS({open:!0,onClose:r}),{variableOrStyleSubscribedLibraries:o,variableOrStyleUsedInThisFile:s}=function(){let e=(0,nr.$)(),t=(0,nn.e)(),l=(0,na.$)(e,t),r=ni(e),a=ni(l);return(0,n.useMemo)(()=>({variableOrStyleSubscribedLibraries:r,variableOrStyleUsedInThisFile:a}),[r,a])}(),[d,c]=(0,n.useState)((0,lb.Bx)()),[m,g]=(0,n.useState)({}),p=(0,n.useMemo)(()=>new Set(Object.keys(d).filter(e=>d[e])),[d]),_=(0,E.md)(ln.Ut),b=no(o),f=no(s),x=l0(),y=0===p.size,h=b!==lo.oV.CONTENT&&f!==lo.oV.CONTENT,S=b===lo.oV.ERROR||f===lo.oV.ERROR,R=lh()(p,_),v=(h||S||y||R)&&!(0,lv.PN)(),T=t===lo.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW||t===lo.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW,k=(0,n.useCallback)(()=>{for(let[e,t]of Object.entries(m))p.has(e)&&t();(0,nv.U_)(T,o.data?.length??0,p.size),x();let e=(0,lS.r)();e?.resetStateForLibrarySelection(),E.zl.set(ln.Ut,p),l(lo.FR.ALL_VISUAL_GROUPS_VIEW),e?.requestDetection(!0)},[x,p,l,m,o,T]);return!function(e,t,l,r){let a=(0,n.useRef)(t.status),i=e===lo.FR.LIBRARY_SELECTOR_INITIAL,o="loaded"===t.status&&"loaded"!==a.current,s=(0,n.useRef)(!0);(0,n.useEffect)(()=>{if(i&&(o||"loaded"===t.status&&s.current)){let e={...l};t.data.forEach(t=>{e[t.library_key]=!0}),r(e)}a.current=t.status,s.current=!1},[i,t,l,r,o])}(t,o,d,c),(0,nv.PV)(T),n.createElement(es.bL,{manager:a,width:385},n.createElement(ed.vo,null,n.createElement(ed.Y9,null,n.createElement(ed.hE,null,n.createElement("div",{className:"x78zum5 x6s0dn4 xg2d0mh"},(0,u.tx)("design_linter.title"),n.createElement(lk.y,{helpUrlVariant:lT.JT.DETECT_VIOLATIONS})))),n.createElement(ed.nB,null,n.createElement(nk,{subscribedLibraries:o,usedInThisFile:s,subscribedLibrariesStatus:b,usedInThisFileStatus:f,checkedStates:d,setCheckedStates:c,setSubscribeCallbacks:g})),n.createElement(ed.wi,null,n.createElement(ed.jk,null,T&&n.createElement(lx.$n,{variant:"secondary",onClick:r},(0,u.tx)("general.cancel")),n.createElement(lx.$n,{recordingKey:lR.Pt(e,"continue-button"),"data-testid":`${e}-continue-button`,disabled:v,onClick:k},T?(0,u.tx)("general.save"):(0,u.tx)("general.continue"))))))}function nk({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o}){if(l===lo.oV.ERROR||r===lo.oV.ERROR)return n.createElement("div",{...em.Ay.props(nI.errorState)},(0,u.tx)("design_linter.library_selector.error"));let s=l===lo.oV.EMPTY&&r===lo.oV.EMPTY;return n.createElement("div",{"data-testid":"design-linter-library-selector",className:"x1b21aiw"},n.createElement(nC,null),s?n.createElement(nt,null):n.createElement(nf,{subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o}))}function nC(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"x7hzu26 x1ef8nbk x1nfngrj x78zum5 xdt5ytf"},n.createElement("div",{...em.Ay.props(nI.instructions)},(0,u.tx)("design_linter.library_selector.instructions")),n.createElement("div",{...em.Ay.props(nI.header_text)},(0,u.tx)("design_linter.library_selector.header"))))}let nI={instructions:{...ev.g.textBodyMedium,$$css:!0},header_text:{...ev.g.textBodyMediumStrong,$$css:!0},errorState:{display:"x78zum5",justifyContent:"xl56j7k",alignCenter:"xxt28ha",padding:"xi4wr45",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,...ev.g.textBodyLarge,$$css:!0}};var nL=l(562027),nN=l(693108),nA=l(231159),nO=l(670549),nw=l(447071);let nM=(0,n.memo)(function(){let e=function(){let e=(0,nw.dG)(nN.s4.TEXT,null),t=(0,E.md)(ln.Ut);return(0,n.useMemo)(()=>{let l=e.libraries.filter(e=>e.numStylesText>0&&t.has(e.libraryKey));return{...e,libraries:l}},[e,t])}();return(function({status:e,libraries:t}){let[l,r]=(0,E.fp)(ln.jq),a=(0,E.md)(ln.Ut),i=(0,E.md)(ts.yV),o=(0,E.md)(nP),{status:s,stylesByFileKey:d}=(0,nw.Zk)({styleType:nN.s4.TEXT,initialSelectedSubscribedStyle:null,selectedLibraries:t.filter(e=>e.numStylesText>0)}),u=(0,n.useMemo)(()=>{if("loading"===s||"loading"===e)return{status:"loading",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if((0,lv.PN)())return{status:"loaded",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if("invalidated"===l.status||"loaded"===s){let e=Object.entries(d).reduce((e,[t,l])=>(a.has(l.libraryKey)&&(e[t]=l),e),{}),t=Object.values(e).flatMap(e=>e.styles),l=null;return o.length>0&&i?.key&&i?.libraryKey&&(l={fileKey:i.key,styles:o,libraryKey:(0,nL.l)(i.libraryKey)},t.push(...o)),{status:"loaded",subscribedStylesByFileKey:e,allStyles:t,localStyles:l}}return l},[s,e,l,d,o,a,i?.key,i?.libraryKey]);(0,n.useEffect)(()=>{(u.status!==l.status||u.allStyles.length!==l.allStyles.length)&&r(u)},[u,l,r])}(e),e.libraries.length)?n.createElement(nO.MM,{inheritStyleKey:null,inheritStyleID:null,styleType:nN.s4.TEXT,selectedLibraries:e.libraries}):null}),nP=(0,nA.bt)(e=>(0,lc.ti)(e.library.local.styles,nN.s4.TEXT));var n$=l(354427),nV=l(716365),nB=l(1511),nz=l(442393),nD=l(930229),nF=l(813321),nU=l(410441),nH=l(10855),nG=l(454805),nj=l(143823),nW=l(588123),nq=l(142917),nX=l(459633),nK=l(399994),nY=l(195257),nQ=l(552807),nJ=(e=>(e.ALL_GROUPS_VIEW="all_groups_view",e.PREVIEW="preview",e))(nJ||{}),nZ=(e=>(e.COLOR="color",e.IMAGE="image",e))(nZ||{});function n0(){return{bg:"var(--color-bg-secondary)",type:"color"}}function n1(e,t){let l=(0,nq.ei)(e),r=(0,lb.wg)(l),[a,o]=(0,n.useState)(n0());return(0,n.useEffect)(()=>{let l=(0,p.UN)().get(e);if(!l)return;let n=l.parentNode;for(;n;){let e=n.guid,l=(0,li.kl)(n.fills).paint;if(l){let n=l.type;if("SOLID"===n){o(function(e){let t=e.color;if(!t)return n0();let l=e.opacity??1,{hex:n}=(0,nY.XF)(t),r=Math.floor(255*l).toString(16);return{bg:`#${n}${r}`,type:"color"}}(l));return}if("IMAGE"===n){o(n5(e,"preview"===t?8:2,r));return}if("VIDEO"!==n&&"EMOJI"!==n){o(n5(e,2,r));return}o(n0());return}n=n.parentNode}let a=i.Egt?.getNodePageBackgroundColor(e);o(a?{bg:a,type:"color"}:n0())},[r,e,t]),a}function n5(e,t,l){let n=`${e}-${t}`,r=E.zl.get(ln.g7),a=r.get(n),o=a?.lastEditedAtTime!==l;if(a&&!o)return{bg:a.src,type:"image"};let s=function(e,t){let l=i.mHF?.copyNodeToLinterScene(e);if(!l)return null;let n=new p.qo(i.juq.LINTER).get(l);if(!n)return null;for(let e of n.childrenNodes)e.removeSelfAndChildren();n.cornerRadius=0,n.effects=[];let[r,a]=(0,lb.tJ)(l,t),o=r.width,s=r.height;return(0,nQ.Pv)(a,new nG.Mi(o,s))}(e,t);if(!s)return n0();if(l>0){let e=new Map(r);e.set(n,{src:s,lastEditedAtTime:l}),E.zl.set(ln.g7,e)}return{bg:s,type:"image"}}let n8=n.memo(function(){let e=(0,n.useRef)(null),t=(0,E.md)(l_.Bd),l=(0,E.md)(l_.$H),r=(0,lN.Te)({count:t?.length??0,getScrollElement:()=>e.current,overscan:3,estimateSize:()=>88}),a=l?l.y-40:475;return n.createElement("div",{"data-testid":"design-linter-groups-list",ref:e,className:"x1rife3k x8rdmch xctkrei",style:{height:a}},n.createElement("div",{...em.Ay.props(n3.description)},(0,u.t)("design_linter.modal.description")),n.createElement("div",{className:"x1n2onr6",style:{height:r.getTotalSize()}},n.createElement("div",{className:"x13vifvy xu96u03 x1n2onr6",style:{height:`${r.getTotalSize()+16}px`}},r.getVirtualItems().map(e=>{let l=t[e.index];return l?n.createElement(n6,{key:e.index,group:l,virtualRow:e}):null}))))}),n7=e=>{let t=(0,E.md)(l_.MP);return e?t.get(e)??0:0},n6=n.memo(function({group:e,virtualRow:t}){let l=(0,E.Xr)(l_.NM),r=(0,E.Xr)(l_._M),[a,i]=(0,nX.M)(),o=n7(e.id),s=(0,n.useCallback)(()=>{l(e.id),r(lo.FR.SELECTED_VISUAL_GROUP_VIEW),(0,nv.Jq)(e.id)},[e.id,r,l]),d=(0,lb.ac)(e);return d?n.createElement(lL.E,{"data-testid":`design-linter-group-item-${t.index}`,className:"xf7z5ut x78zum5 xl56j7k xb3r6kr xkzqb9i x19y5rnk x7z60cl x1exxlbk xdd8jsf",onClick:s,key:d,"data-index":t.index,...em.Ay.props(n3.groupRow,i&&n3.groupRowHover),style:{height:`${t.size}px`,transform:`translateY(${t.start}px)`},ref:a},n.createElement("div",{className:"x78zum5 x6s0dn4"},n.createElement(n4,{rootNodeId:d}),n.createElement("div",{className:"xrybvsa x78zum5 xdt5ytf"},n.createElement("div",{...em.Ay.props(n3.groupTitle)},(0,u.t)("design_linter.visual_group_row.title",{count:e?.rootNodeIdToViolatingNodeIdSet.size})),n.createElement("div",{...em.Ay.props(n3.groupSubtitle)},(0,u.t)("design_linter.visual_group_row.subtitle",{count:o})))),n.createElement("div",{...em.Ay.props(n3.chevron,i&&n3.showChevron)},n.createElement(nW.e,null))):null}),n4=n.memo(function({rootNodeId:e}){let t=(0,nq.ei)(e),l=(0,lb.wg)(t),r=(0,nK.yh)({nodeId:e,width:100,height:100,shouldSkip:!1,version:l,reason:"design-linter.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:!1,shouldCache:l>0}),{bg:a,type:i}=n1(e,nJ.ALL_GROUPS_VIEW),o=i===nZ.COLOR,s=i===nZ.IMAGE;return r?n.createElement("div",{...em.Ay.props(n3.thumbnailContainer,s&&n3.backgroundImageContainer),style:{...o&&{backgroundColor:a},...s&&{backgroundImage:`url(${a})`}}},n.createElement(e4.oW,{src:r.src,className:"x19kjcj4 x193iq5w xmz0i5r",alt:(0,u.t)("design_linter.penalty_box.thumbnail_alt")})):n.createElement("div",{className:"xf7z5ut x78zum5 xl56j7k xb3r6kr xkzqb9i x19y5rnk x7z60cl x1exxlbk xdd8jsf"},n.createElement(nE.Qp,{className:"x1exxlbk x14nwjz3 x19y5rnk x7z60cl",animationType:nE.JR.LIGHT_SHIMMER}))}),n3={description:{...ev.g.textBodyMedium,marginLeft:"xrybvsa",marginInlineStart:null,marginInlineEnd:null,marginTop:"xehsoiq",userSelect:"x87ps6o",$$css:!0},thumbnailContainer:{padding:"xf7z5ut",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,display:"x78zum5",justifyContent:"xl56j7k",overflow:"xb3r6kr",overflowX:null,overflowY:null,border:"xkzqb9i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,width:"x1exxlbk",height:"xdd8jsf",$$css:!0},groupRowHover:{backgroundColor:"x1v8gsql",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},groupRow:{display:"x78zum5",marginTop:"x7hzu26",marginBottom:"x1ef8nbk",padding:"xf7z5ut",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,height:"xt7dq6l",position:"x10l6tqk",top:"x13vifvy",left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},groupTitle:{...ev.g.textBodyMedium,color:"x1akne3o",$$css:!0},groupSubtitle:{...ev.g.textBodyMedium,color:"x1n0bwc9",$$css:!0},chevron:{opacity:"xg01cxk",height:"xxk0z11",width:"xvy4d1p",visibility:"xlshs6z",$$css:!0},showChevron:{opacity:"x1hc1fzr",visibility:"xnpuxes",$$css:!0},backgroundImageContainer:{backgroundRepeat:"xiy17q3",backgroundSize:"x18d0r48",backgroundPosition:"x1xsqp64",backgroundPositionX:null,backgroundPositionY:null,backgroundColor:"x1v8gsql",$$css:!0}};var n2=l(195124),n9=l(320953),re=l(303397);function rt({title:e,getItems:t,getItemName:l}){let[r,a]=(0,n.useState)(!1),o=(0,n.useCallback)(async()=>{r||(a(!0),await n());async function n(){try{let n;let r=[];(0,n9.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let t=(0,p.UN)(),l=t.getCurrentPage();(n=t.createNode("SECTION")).fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9,a:0},opacity:1}],n.name=e;let r=0;for(let e of l?.childrenNodes??[])e.x+e.size.x>r&&(r=e.x+e.size.x);n.x=r+100,n.y=0});let a=0,o=40,s=t();for(let[e,[t,d]]of Array.from(s.entries()).entries()){let s;(0,n9.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let i=(0,p.UN)();if(e>0){let e=i.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.3,g:.3,b:.3,a:1},opacity:1}],e.size={x:a,y:12},e.y=o+40,e.x=40,n.appendChild(e),o+=e.size.y+80,r.push(e.guid)}(s=i.createNode("FRAME")).visible=!1,s.name=l(t),s.x=40,s.y=o,s.fills=[{type:"SOLID",color:{r:.7,g:.7,b:.7,a:1},opacity:1}],s.stackMode="HORIZONTAL",s.stackSpacing=40,s.stackCounterSizing="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE",s.stackTopPadding=40,s.stackBottomPadding=40,s.stackLeftPadding=40,s.stackRightPadding=40,s.frameMaskDisabled=!0});let u=0,c=0,m=0;for(let[e,t]of d.entries())await new Promise(e=>setTimeout(e,0)),(0,n9.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let l;let r=(0,p.UN)(),a=r.get(t);if(!a)return;if("DOCUMENT"===a.type)l=r.createNode("FRAME").guid;else{if("CANVAS"===a.type)return;l=a.clone()}if(e>0){let e=r.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.6,g:.2,b:.6,a:1},opacity:1}],e.size={x:4,y:c+40},e.y=40,e.x=u,s.appendChild(e),u+=e.size.x+40}let i=r.get(l);i&&(i.y=40,i.x=u,i.stackPositioning="AUTO",u+=i.size.x+40,c=Math.max(c,i.size.y),m=Math.max(m,i.size.x),"SECTION"===a.type?(n.appendChild(i),i.y=o):s.appendChild(i))});a=Math.max(a,u),o=o+c+120,(0,n9.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{if(n.size={x:a+40,y:o},0===s.childCount){s.removeSelfAndChildren();return}s.size={x:u,y:c+40},n.appendChild(s),s.visible=!0})}let d=(0,p.UN)().getCurrentPage();(0,n9.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{n&&(d?.appendChild(n),function(e,t){let l=(0,p.UN)();for(let n of e){let e=l.get(n);e&&(e.size={x:t,y:e.size.y})}}(r,n.size.x-80),i.Egt?.replaceSelection([n.guid],!0),re.Y5.triggerAction("goto-layer",{args:{nodeId:n.guid}}))})}catch(e){console.error(e)}finally{a(!1)}}},[r,t,l,e]);return{isRunning:r,handleClick:o}}function rl(){let e=(0,E.md)(l_.Bd),{isRunning:t,handleClick:l}=rt({title:"Visual groups",getItems:(0,n.useCallback)(()=>{let t=new Map;return e.forEach(e=>{let l=`${e.id} | ${e.type}`;t.set(l,Array.from(e.rootNodeIdToViolatingNodeIdSet.keys()))}),t},[e]),getItemName:(0,n.useCallback)(e=>e,[])});return n.createElement("div",{className:"xz9dl7a"},n.createElement(lx.$n,{disabled:t,onClick:l,iconPrefix:t?n.createElement(nj.k,null):void 0},"Inspect groups"))}function rn(){let e=(0,E.md)(ln.fY),{isRunning:t,handleClick:l}=rt({title:"Visual Hashes",getItems:(0,n.useCallback)(()=>(function(e){let t=new Map,l=(0,p.UN)();return e.forEach(e=>{let n=l.get(e);n&&(0,n2.hV)(n,e=>{let l=String(i.mHF?.getVisualGroupFieldsHash(e.guid)??0),n=t.get(l)??[];t.set(l,[...n,e.guid])})}),t})(e?.guids??[]),[e]),getItemName:(0,n.useCallback)(e=>`Hash: ${e}`,[])});return n.createElement("div",{className:"xz9dl7a"},n.createElement(lx.$n,{disabled:t,onClick:l,iconPrefix:t?n.createElement(nj.k,null):void 0},"Inspect Vis. G Field Hashes"))}function rr(){let e=(0,E.md)(ln.u2),t=(0,E.md)(ln.fY),l=t?.guids??[],r=function(){let e=(0,E.md)(ln.fY),[t,l]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let t=0;if(e){let l=(0,p.UN)();e.guids.forEach(e=>{let n=l.get(e);n&&(0,n2.hV)(n,()=>{t++})})}l(t)},[e]),t}(),a=(0,E.md)(la.yd),i=(0,E.md)(ln.Iy),{status:o}=(0,E.md)(ln.v4),s=function(){let e=(0,E.md)(ln.m7);return(0,n.useMemo)(()=>Array.from(e.values()).reduce((e,t)=>e+t.size,0),[e])}(),d=function(){let[e,t]=(0,n.useState)(0),l=(0,E.md)(ln.Iy),r=(0,E.md)(ln.m7);return(0,n.useEffect)(()=>{let e=new Set;for(let t of l.values())for(let l of t.violatingNodeIdToRootNodeId.keys())e.add(l);let n=new Set;for(let t of r.values())for(let l of t.values())e.has(l.guid)||n.add(l.guid);t(n.size)},[r,l]),e}(),u=function(){let e=(0,E.md)(ln.m7);return(0,n.useMemo)(()=>{let t={};for(let l of e.values())for(let e of l.values()){let{ruleId:l}=e;t[l]=t[l]||[],t[l].push(e)}return Object.entries(t).map(([e,t])=>({rule:e,count:t.length}))},[e])}();return n.createElement(n.Fragment,null,n.createElement("div",{className:eE.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Linter status:"),n.createElement("div",{className:eE.s.textBodyMedium.$},e),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Variable context status:"),n.createElement("div",{className:eE.s.textBodyMedium.$},o),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Linting target:"),n.createElement("div",{className:eE.s.textBodyMedium.maxW200.overflowAuto.$},`${l.join(",")}`),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Linting target nodes:"),n.createElement("div",{className:eE.s.textBodyMedium.$},r),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Lintable nodes:"),n.createElement("div",{className:eE.s.textBodyMedium.$},a),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Visual groups:"),n.createElement("div",{className:eE.s.textBodyMedium.$},i.size),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Violations:"),n.createElement("div",{className:eE.s.textBodyMedium.$},s),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Ungrouped violations:"),n.createElement("div",{className:eE.s.textBodyMedium.$},d),n.createElement("div",{className:eE.s.textHeadingSmall.pb4.$},"Violations per rule:"),n.createElement("ol",null,u.map(({rule:e,count:t})=>n.createElement("span",{key:e,className:eE.s.textBodyMedium.block.$},n.createElement("strong",null,e),": ",t)))))}function ra(e){if(!e)return"loading";let t=e.toFixed(3);return e<1e3?`${t}ms`:e<6e4?`${(e/1e3).toFixed(2)}s (${t}ms)`:`${(e/6e4).toFixed(2)}min (${t}ms)`}function ri({label:e,value:t,isHeader:l=!1}){return n.createElement(n.Fragment,null,n.createElement("div",{className:tb()(eE.s.textHeadingSmall.mr1.$,{[eE.s.textHeadingMedium.$]:l})},e),n.createElement("div",{className:eE.s.textBodyMedium.$},ra(t)))}function ro({items:e}){return n.createElement("div",{className:eE.s.flex.flexColumn.overflowAuto.$},n.createElement("table",null,n.createElement("tbody",null,e.map(([e,t])=>n.createElement("tr",{key:e},n.createElement("td",{className:eE.s.textBodyMedium.pr2.italic.noWrap.$},n.createElement("strong",null,e)),n.createElement("td",{className:eE.s.textBodyMedium.alignLeft.$},ra(t)))))))}function rs(){let e=(0,E.md)(la.eF),t=(0,E.md)(la.L2)??[],l=t.reduce((e,{duration:t})=>e+t,0),r=(0,E.md)(la.rT)??new Map,a=(0,E.md)(la.KV)??new Map,i=(0,E.md)(la.zZ)??new Map;return n.createElement(n.Fragment,null,n.createElement("div",{className:eE.s.textHeadingSmall.mr1.textHeadingMedium.$},"Overall latency info:"),n.createElement("div",{className:eE.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement(ri,{label:"Time until first group:",value:e}),n.createElement(ri,{label:"Total loading time:",value:l}),n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Time per status:"),n.createElement(ro,{items:t.map(({status:e,duration:t})=>[e,t])}),n.createElement("div",{className:eE.s.textHeadingSmall.pb4.$},"Detection time per rule:"),n.createElement(ro,{items:Array.from(r)}),n.createElement("div",{className:eE.s.textHeadingSmall.pb4.$},"Avg detection time per rule per node:"),n.createElement(ro,{items:Array.from(a)}),n.createElement("div",{className:eE.s.textHeadingSmall.pb4.$},"P95 detection time per rule:"),n.createElement(ro,{items:Array.from(i).filter(([e,t])=>null!==t).map(([e,t])=>[e,t])})))}function rd(){let e=(0,E.md)(l_.E$),t=e?.rootNodeIdToViolatingNodeIdSet.size,l=(0,E.md)(la.Op),r=(0,E.md)(la.iS),a=(0,E.md)(la.ky);return n.createElement(n.Fragment,null,n.createElement("div",{className:eE.s.textHeadingSmall.italic.mt8.$},"For current group:"),n.createElement("div",{className:eE.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement("div",{className:eE.s.textHeadingSmall.mr1.$},"Group size (nodes):"),n.createElement("div",{className:eE.s.textBodyMedium.$},t),n.createElement(ri,{label:"Fix loading time:",value:l}),n.createElement(ri,{label:"Current thumbnail loading time:",value:r}),n.createElement(ri,{label:"Suggested thumbnail loading time:",value:a})))}function ru(){let e=(0,lS.r)();return n.createElement("div",{className:eE.s.flex.flexColumn.gap4.py8.w150.$},n.createElement(lx.$n,{onClick:()=>{e?.debugLinterState()}},"Copy linter state"),n.createElement(rl,null),n.createElement(rn,null))}function rc(){let[e,t]=(0,n.useState)(!1);return n.createElement("div",{className:eE.s.colorBg.mx16.mt16.flex.flexColumn.b2.bRadius4.colorBorder.p4.wAuto.$},n.createElement("div",{className:eE.s.p4.$},n.createElement(lL.E,{className:eE.s.colorBg.wFull.$,onClick:()=>t(!e)},n.createElement("span",null,e?"\u25BC":"\u25B6"),n.createElement("span",{className:eE.s.ml2.textHeadingMedium.$},"Linter debug view")),e&&n.createElement(n.Fragment,null,n.createElement(rr,null),n.createElement(rs,null),n.createElement(rd,null),n.createElement(ru,null))))}let rm=(0,E.eU)(null,async e=>{E.zl.set(la.Op,null);let t=performance.now(),l=e(l_.E7),n=(0,lS.r)();if(!n)return;let r=Object.values(l);await Promise.allSettled(r.map(e=>n.requestFix(e))),E.zl.set(la.Op,performance.now()-t)}),rg={suggestionsViewWidth:"var(--x1uvavt)",suggestionsModalHeaderHeight:"var(--x1vqszz8)",previewHeaderHeight:"var(--xkgaxnv)"};var rp=l(762217),rE=l(300322),r_=l(373286),rb=l(183867),rf=l(581672),rx=l(624236);class ry extends rx.JB{constructor(){super(!1),this.name="AbortError"}}var rh=l(769690),rS=l(508328);function rR(e,t,l){let[r,a]=(0,n.useState)((0,rE.Ok)()),o=(0,n.useRef)(null),{violationsWithFixes:s,areFixesReady:d}=function(e){let t=function(e){let t=(0,E.md)(l_.IZ);return(0,n.useMemo)(()=>{if(!e)return[];let l=(0,p.UN)();return t.filter(t=>t.guid===e||(0,n2.rV)(l,e,t.guid))},[e,t])}(e),l=(0,E.md)(l_.$C),[r,a]=(0,n.useState)(!1);return{violationsWithFixes:(0,n.useMemo)(()=>{if(!l)return[];let e=!0,n=t.map(t=>{let n=l.get(t.groupKey);return n?.status==="loading"&&(e=!1),{violation:t,selectedFix:n?.fix||null}});return a(e),n},[l,t]),areFixesReady:r}}(t);return(0,n.useEffect)(()=>{let n=e===r5.SUGGESTED,r=async()=>{let r=performance.now();n?E.zl.set(la.ky,null):E.zl.set(la.iS,null);let d=new AbortController;o.current=d;try{let r;if(!t)return;a((0,rE.ux)());let o=rv(t,e),u=E.zl.get(ln.qL).get(o),c=l<=0,m=u?.lastEditedAtTime!==l||c,g=m,_="";if(n){_=function(e){let t=JSON.stringify(e.map(e=>(function({violation:e,selectedFix:t}){var l;return t?.fixContext?`${e.guid}_${e.groupKey}_${l=t.fixContext,JSON.stringify(l,(e,t)=>t&&"object"==typeof t&&!Array.isArray(t)?Object.keys(t).sort().reduce((e,l)=>(e[l]=t[l],e),{}):t)}`:`${e.guid}_${e.groupKey}`})(e)).sort());return(0,rS.F)(t)}(s);let e=u?.violationsStateHash!==_;g=m||e}if(u&&!g){let e=(0,rE.NY)(u.thumbnail);a(e);return}if((r=n?await rT(t,l,_,s,d.signal):function(e,t,l){let n=i.mHF?.copyNodeToLinterScene(e);if(!n)throw Error("Current linter scene guid not found");let r=(0,p.UN)().get(e);if(!r)throw Error("Original node not found");if(l.aborted)throw new ry;let a=new p.qo(i.juq.LINTER).get(n);if(!a)throw Error("Current linter scene node not found");let o=rk(r,a),[s,d]=(0,lb.tJ)(n,r1);if(l.aborted)throw new ry;return{thumbnail:{width:s.width,height:s.height,image:d},activeToLinterGuidsMap:o,linterGuidsToNodeInfoMap:rC(a),lastEditedAtTime:t}}(t,l,d.signal)).thumbnail.image.length>0){a((0,rE.NY)(r.thumbnail)),function(e,t){let l=new Map(E.zl.get(ln.qL));l.set(e,t),E.zl.set(ln.qL,l)}(o,r);return}a((0,rE.uW)())}catch(e){a((0,rE.uW)())}finally{let e=performance.now()-r;n?E.zl.set(la.ky,e):E.zl.set(la.iS,e)}};if(n&&!d){a((0,rE.Ok)());return}return r(),()=>{o.current?.abort()}},[t,l,e,s,d]),r}function rv(e,t){return`${e}-${t}`}async function rT(e,t,l,n,r){let a=i.mHF?.copyNodeToLinterScene(e);if(!a)throw Error("Suggested linter scene guid not found");let o=(0,p.UN)().get(e);if(!o)throw Error("Original node not found");if(r.aborted)throw new ry;let s=new p.qo(i.juq.LINTER).get(a);if(!s)throw Error("Suggested linter scene node not found");let d=rk(o,s);await lS.r()?.applyFixesToThumbnailNode(n,d,r);let[u,c]=(0,lb.tJ)(a,r1);if(r.aborted)throw new ry;return{thumbnail:{width:u.width,height:u.height,image:c},activeToLinterGuidsMap:d,linterGuidsToNodeInfoMap:rC(s),lastEditedAtTime:t,violationsStateHash:l}}function rk(e,t){let l=new Map,n=[],r=[];return(0,rh.eA)(e,e=>{n.push(e.guid)}),(0,rh.eA)(t,e=>{r.push(e.guid)}),n.forEach((e,t)=>{l.set(e,r[t]??"-1:-1")}),l}function rC(e){let t=new Map;return(0,rh.eA)(e,e=>{let l=e.childrenNodes.reduce((e,t)=>(t.visible&&e.set(t.guid,rI(t,!1)),e),new Map);t.set(e.guid,{absoluteRenderBounds:rI(e,!0),absoluteBoundingBox:rI(e,!1),cornerRadiusValues:e.cornerRadiusValues,childrenBoundingBoxesMap:l})}),t}function rI(e,t){let l=t?e.absoluteRenderBounds:e.absoluteBoundingBox;return l?{x:l.x,y:l.y,width:l.w,height:l.h}:null}function rL(e){let t=E.zl.get(ln.qL),l=t.get(rv(e,r5.CURRENT)),n=t.get(rv(e,r5.SUGGESTED));return[l?.activeToLinterGuidsMap,n?.activeToLinterGuidsMap]}var rN=l(28827),rA=l(880191),rO=l(940807),rw=l(269466);function rM(e,t){let l=e.transformRect(new rO.r(new rw.M(t.x,t.y),new rw.M(t.width,t.height)));return{x:l.left(),y:l.top(),width:l.width(),height:l.height()}}let rP={hover:{position:"x10l6tqk",borderColor:"x1va2ikv",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,$$css:!0}};function r$({overlayInfo:e,transform:t}){let l;let{ruleId:r,bounds:a,cornerRadiusValues:i}=e;if(!i)return null;let o=rM(t,a),s=Math.min(o.width/a.width,o.height/a.height),d=Math.max(2*s,1),u=Math.max(16*s,16),c=rA.S[r].toLowerCase(),m=c.includes("right"),g=c.includes("bottom"),p=function(e,t,l,n){let{width:r,height:a}=t,i=Math.min(r/(e.topLeft+e.topRight),1),o=Math.min(a/(e.topRight+e.bottomRight),1),s=Math.min(r/(e.bottomLeft+e.bottomRight),1),d=Math.min(a/(e.topLeft+e.bottomLeft),1),u=e.topLeft*Math.min(i,d);return{topLeft:u*l+n,topRight:e.topRight*Math.min(i,o)*l+n,bottomRight:e.bottomRight*Math.min(s,o)*l+n,bottomLeft:e.bottomLeft*Math.min(s,d)*l+n}}(i,a,s,d),{borderWidth:E,borderLength:_}=function(e,t,l,n,r,a,i){let o=e.width+a,s=e.height+a,d=n?"bottom":"top",u=l?"Right":"Left",c=l?r[`${d}Left`]:r[`${d}Right`];return{borderWidth:Math.max(Math.min(t+(o-c-t)/2-2,i),t),borderLength:Math.max(Math.min(t+(s-(n?r[`top${u}`]:r[`bottom${u}`])-t)/2-2,i),t)}}(o,l=m&&g?p.bottomRight:m&&!g?p.topRight:!m&&g?p.bottomLeft:p.topLeft,m,g,p,d,u),b=m?o.x+o.width-E:o.x-d,f=g?o.y+o.height-_:o.y-d,x={width:E,height:_,transform:`translate(${b}px, ${f}px)`,[`border${g?"Bottom":"Top"}Width`]:d,[`border${m?"Right":"Left"}Width`]:d,[`border${g?"Bottom":"Top"}${m?"Right":"Left"}Radius`]:l};return n.createElement("div",{...em.Ay.props(rP.hover),style:x})}function rV({overlayInfo:e,transform:t}){let l=rM(t,e.bounds),r=Array.from(e.childrenBoundsMap.entries()).map(([e,l])=>({guid:e,bounds:rM(t,l)})),a=e.ruleId===rN.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES,i=r.sort((e,t)=>a?e.bounds.x-t.bounds.x:e.bounds.y-t.bounds.y),o=[];for(let e=0;e<i.length-1;e++){let t=i[e],r=i[e+1];if(!t||!r)continue;let s=`${t.guid}-${r.guid}`;if(a){let e=t.bounds.x+t.bounds.width,a=r.bounds.x-e;a>0&&o.push(n.createElement("div",{className:"x10l6tqk x6zv46q xuzhngd",key:s,style:{transform:`translate(${e}px, ${l.y}px)`,width:a,height:l.height}}))}else{let e=t.bounds.y+t.bounds.height,a=r.bounds.y-e;a>0&&o.push(n.createElement("div",{className:"x10l6tqk x6zv46q xuzhngd",key:s,style:{transform:`translate(${l.x}px, ${e}px)`,width:l.width,height:a}}))}}return n.createElement(n.Fragment,null,o)}let rB=(0,n.createContext)(null);function rz({children:e,value:t}){return n.createElement(rB.Provider,{value:t},e)}function rD(e){let t=(0,n.useContext)(rB);return t?n.createElement(rF,{...e,...t}):null}let rF=n.memo(function(e){let{overlayInfoList:t,transform:l}=e;return n.createElement(n.Fragment,null,t.map((e,t)=>n.createElement("div",{key:t},n.createElement(rU,{overlayInfo:e,transform:l}))))});function rU({overlayInfo:e,transform:t}){switch(e.ruleId){case rN.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:return n.createElement(r$,{overlayInfo:e,transform:t});case rN.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:case rN.C.REQUIRE_VERTICAL_SPACING_VARIABLES:return n.createElement(n.Fragment,null,!e.isNested&&n.createElement(rH,{overlayInfo:e,transform:t}),n.createElement(rV,{overlayInfo:e,transform:t}));default:return n.createElement(rH,{overlayInfo:e,transform:t})}}function rH({overlayInfo:e,transform:t}){let l=rM(t,e.bounds),r=l.x-2,a=l.y-2;return n.createElement("div",{...em.Ay.props(rP.hover),style:{transform:`translate(${r}px, ${a}px)`,borderWidth:2,width:l.width,height:l.height}})}var rG=(e=>(e.BACKGROUND_COLOR="BACKGROUND_COLOR",e.STROKE_COLOR="STROKE_COLOR",e.TEXT_COLOR="TEXT_COLOR",e.TEXT_STROKE_COLOR="TEXT_STROKE_COLOR",e.SHAPE_COLOR="SHAPE_COLOR",e.SHAPE_STROKE_COLOR="SHAPE_STROKE_COLOR",e.TEXT_STYLE="TEXT_STYLE",e.COMPONENT_MATCH="COMPONENT_MATCH",e.COMPONENT_UPDATE="COMPONENT_UPDATE",e.REQUIRE_STACK_PADDING_TOKENS="REQUIRE_STACK_PADDING_TOKENS",e.CORNER_RADIUS="CORNER_RADIUS",e.HORIZONTAL_SPACING="HORIZONTAL_SPACING",e.VERTICAL_SPACING="VERTICAL_SPACING",e.TEXT_BACKGROUND_CONTRAST_AA="TEXT_BACKGROUND_CONTRAST_AA",e))(rG||{});let rj=()=>({BACKGROUND_COLOR:{id:"BACKGROUND_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.fill_colors.background_colors"),priority:0},STROKE_COLOR:{id:"STROKE_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.stroke_colors.stroke_color"),priority:1},SHAPE_COLOR:{id:"SHAPE_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.fill_colors.shape_colors"),priority:2},SHAPE_STROKE_COLOR:{id:"SHAPE_STROKE_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.stroke_colors.shape_stroke_colors"),priority:3},TEXT_COLOR:{id:"TEXT_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.fill_colors.text_color"),priority:4},TEXT_STROKE_COLOR:{id:"TEXT_STROKE_COLOR",getLabel:()=>(0,u.t)("design_linter.suggestion_block.stroke_colors.text_stroke_color"),priority:5},TEXT_STYLE:{id:"TEXT_STYLE",getLabel:()=>(0,u.t)("design_linter.suggestion_block.text_style"),priority:6},CORNER_RADIUS:{id:"CORNER_RADIUS",getLabel:()=>(0,u.t)("design_linter.suggestion_block.corner_radius"),priority:7},HORIZONTAL_SPACING:{id:"HORIZONTAL_SPACING",getLabel:()=>(0,u.t)("design_linter.suggestion_block.horizontal_spacing"),priority:8},VERTICAL_SPACING:{id:"VERTICAL_SPACING",getLabel:()=>(0,u.t)("design_linter.suggestion_block.vertical_spacing"),priority:9},COMPONENT_MATCH:{id:"COMPONENT_MATCH",getLabel:()=>(0,u.t)("design_linter.rules.component_match.dropdown_title"),priority:10},COMPONENT_UPDATE:{id:"COMPONENT_UPDATE",getLabel:()=>(0,u.t)("design_linter.rules.component_match.dropdown_title"),priority:12},REQUIRE_STACK_PADDING_TOKENS:{id:"REQUIRE_STACK_PADDING_TOKENS",getLabel:()=>(0,u.t)("design_linter.suggestion_block.padding"),priority:11},TEXT_BACKGROUND_CONTRAST_AA:{id:"TEXT_BACKGROUND_CONTRAST_AA",getLabel:()=>(0,u.t)("design_linter.suggestion_block.text_background_contrast_aa"),priority:12}});var rW=(e=>(e.COLOR="COLOR",e.TEXT="TEXT",e.NUMBER="NUMBER",e.DEFAULT="DEFAULT",e))(rW||{});let rq=(0,E.eU)(e=>{let t=e(l_.IZ),l={},n=0,r=(e,t,r)=>{l[e]||(l[e]={}),l[e][t]||(l[e][t]=[]),l[e][t].push(r),n++};for(let e of t){let{groupKey:t,ruleId:l,nodeType:n}=e;switch(l){case rN.C.REQUIRE_FILL_COLOR_VARIABLES:!function(e,t,l){"TEXT"===e?r(rG.TEXT_COLOR,t,l):"FRAME"===e?r(rG.BACKGROUND_COLOR,t,l):r(rG.SHAPE_COLOR,t,l)}(n,t,e);break;case rN.C.REQUIRE_STROKE_COLOR_VARIABLES:!function(e,t,l){"TEXT"===e?r(rG.TEXT_STROKE_COLOR,t,l):"FRAME"===e?r(rG.STROKE_COLOR,t,l):r(rG.SHAPE_STROKE_COLOR,t,l)}(n,t,e);break;case rN.C.REQUIRE_TEXT_STYLES:r(rG.TEXT_STYLE,t,e);break;case rN.C.COMPONENT_MATCH:r(rG.COMPONENT_MATCH,t,e);break;case rN.C.COMPONENT_UPDATE:r(rG.COMPONENT_UPDATE,t,e);break;case rN.C.REQUIRE_STACK_PADDING_VARIABLES:r(rG.REQUIRE_STACK_PADDING_TOKENS,t,e);break;case rN.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case rN.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:r(rG.CORNER_RADIUS,t,e);break;case rN.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:r(rG.HORIZONTAL_SPACING,t,e);break;case rN.C.REQUIRE_VERTICAL_SPACING_VARIABLES:r(rG.VERTICAL_SPACING,t,e);break;case rN.C.TEXT_BACKGROUND_CONTRAST_AA:r(rG.TEXT_BACKGROUND_CONTRAST_AA,t,e);break;case rN.C.REQUIRE_COLOR_VARIABLES_FROM_SELECTED_LIBRARIES:break;default:throw Error("Unknown rule ID: "+l)}}return{suggestionBlocks:l,violationCount:n}}),rX=(0,E.Iz)(e=>(0,E.eU)(t=>{let{suggestionBlocks:l}=t(rq),n=[],r=0,a=rj();for(let t of e){let e=l[t];e&&0!==Object.keys(e).length&&(r+=Object.values(e).flat().length,n.push({blockConfig:a[t],violationsByGroupKey:e}))}return{blocks:n.sort((e,t)=>e.blockConfig.priority-t.blockConfig.priority),totalViolations:r}})),rK=rX(["BACKGROUND_COLOR","STROKE_COLOR","SHAPE_COLOR","SHAPE_STROKE_COLOR","TEXT_COLOR","TEXT_STROKE_COLOR"]),rY=rX(["CORNER_RADIUS","HORIZONTAL_SPACING","VERTICAL_SPACING","REQUIRE_STACK_PADDING_TOKENS"]),rQ=rX([rG.TEXT_STYLE]),rJ=rX([rG.COMPONENT_MATCH]),rZ=rX([rG.TEXT_BACKGROUND_CONTRAST_AA]),r0=[2,3,6,13,25,50,75,100,200,300,1e3],r1=2;var r5=(e=>(e.CURRENT="current",e.SUGGESTED="suggested",e))(r5||{});let r8=n.memo(function(){let{rootNodeId:e}=function(){let e=(0,E.md)(l_.E$),t=(0,E.md)(l_.Bp)??"",l=(0,n.useMemo)(()=>e&&t?e.rootNodeIdToViolatingNodeIdSet.get(t)??new Set:new Set,[t,e]);return{rootNodeId:t,violatingNodeIdSet:l,hasValidGroup:!!e}}(),t=(0,nq.ei)(e),l=(0,lb.wg)(t),r=rR("current",e,l),a=rR("suggested",e,l);return n.createElement(r7,{nodeId:e,currentImage:r,suggestedImage:a})});function r7({nodeId:e,currentImage:t,suggestedImage:l}){let r=(0,E.md)(l_.$H),[a,i]=function(e){let t=(0,E.md)(ln.hx);if(!e)return[[],[]];let l=(0,p.UN)(),n=t.filter(t=>t.guid===e||(0,n2.rV)(l,e,t.guid)).map(e=>({guid:e.guid,ruleId:e.ruleId})),[r,a]=rL(e),{currentNodeGuids:i,suggestedNodeGuids:o}=n.reduce((e,{guid:t,ruleId:l})=>{let n=r?.get(t),i=a?.get(t);return n&&e.currentNodeGuids.push({guid:n,ruleId:l}),i&&e.suggestedNodeGuids.push({guid:i,ruleId:l}),e},{currentNodeGuids:[],suggestedNodeGuids:[]});return[i,o]}(e),{current:o,suggested:s}=function(e,t,l){let n={current:null,suggested:null};if(!e)return n;let[r,a]=rL(e),[i,o]=function(e){let t=E.zl.get(ln.qL),l=t.get(rv(e,r5.CURRENT)),n=t.get(rv(e,r5.SUGGESTED));return[l?.linterGuidsToNodeInfoMap,n?.linterGuidsToNodeInfoMap]}(e),s=r?.get(e)??"-1:-1";n.current=r6(t,s,i);let d=a?.get(e)??"-1:-1";return n.suggested=r6(l,d,o),n}(e,a,i),d=n1(e,nJ.PREVIEW);return n.createElement(rp.o,{eventListeners:["onPointerDown"]},n.createElement("div",{...em.xk(ae.previewContainer(r?.x,r?.y))},n.createElement(r9,null),n.createElement(r_.qW,{zoomPercentageOptions:r0,zoomOnMousePointer:!1,resetStateOnChangeValue:e,compareThumbnailSource:rf.FO.LINTER},n.createElement(rz,{value:o},n.createElement(r3,{asyncLoadedImage:t,scale:r1,thumbnailType:"current",title:(0,u.t)("design_linter.preview.current"),Overlay:rD,background:d})),n.createElement(rz,{value:s},n.createElement(r3,{asyncLoadedImage:l,scale:r1,thumbnailType:"suggested",title:(0,u.t)("design_linter.preview.suggested"),Overlay:rD,background:d})))))}function r6(e,t,l){let n=new p.qo(i.juq.LINTER),r=l?.get(t)?.absoluteRenderBounds;if(!r)return null;let a=[];for(let{guid:t,ruleId:i}of e){let e=l?.get(t)?.absoluteBoundingBox;if(!e)continue;let o=r4(e,r),s=l?.get(t)?.childrenBoundingBoxesMap||new Map,d=new Map;for(let[e,t]of s)if(t){let l=r4(t,r);d.set(e,l)}let u=a.some(e=>e.guid!==t&&(0,n2.rV)(n,e.guid,t));a.push({guid:t,ruleId:i,isNested:u,bounds:o,childrenBoundsMap:d,cornerRadiusValues:l?.get(t)?.cornerRadiusValues})}return{overlayInfoList:a}}function r4(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function r3({asyncLoadedImage:e,scale:t,thumbnailType:l,title:r,Overlay:a,background:i}){let o;let{image:s,isLoading:d}=n.useMemo(()=>(0,rE.xj)(e)?{isLoading:!1,image:{data:e.value.image,width:e.value.width,height:e.value.height,scale:t}}:(0,rE.Mx)(e)||(0,rE.yx)(e)?{isLoading:!0,image:null}:{isLoading:!1,image:null},[e,t]);return o=s?n.createElement(rb.ec,{image:s,paddingPixels:30,Overlay:a}):d?n.createElement("div",{className:"x78zum5 x5yr21d x6s0dn4 xl56j7k x1v8gsql"},n.createElement(tx.x,{isLoading:!0},()=>(0,u.tx)("design_linter.preview.thumbnail_unavailable"))):n.createElement("div",{className:"x78zum5 x5yr21d x6s0dn4 xl56j7k x1v8gsql"},(0,u.tx)("design_linter.preview.thumbnail_unavailable")),n.createElement(r2,{title:r,thumbnailType:l,background:i},o)}function r2({title:e,thumbnailType:t,children:l,background:r}){let{bg:a,type:i}=r,o=i===nZ.COLOR,s=i===nZ.IMAGE;return n.createElement("div",{...em.xk(ae.comparableContainer,"current"===t&&ae.currentContainer,"suggested"===t&&ae.suggestedContainer,s&&ae.backgroundImageContainer),style:{...o&&{backgroundColor:a},...s&&{backgroundImage:`url(${a})`}}},n.createElement("div",{className:"xuuh30 x10l6tqk x1ey2m1c x1vjfegm x87ps6o x1y1aw1k xwib8y2 x1nrll8i"},n.createElement("span",{...em.xk(ae.comparableTitle)},e)),l)}let r9=(0,n.memo)(function(){let e=(0,E.md)(l_.vu).length,t=0===(0,E.md)(rq).violationCount;return n.createElement("div",{className:"x78zum5 xdt5ytf x1yjdb4r xso031l x1y0btm7 x7z60cl x1vp34bk xl56j7k xb3r6kr"},n.createElement("div",{...em.xk(ae.previewContent)},t?null:n.createElement("span",null,(0,u.tx)("design_linter.preview_header.title",{count:e}))))}),ae={previewContainer:(e,t)=>[{width:(rg.suggestionsViewWidth,"x1bl4301"),height:(rg.suggestionsModalHeaderHeight,rg.previewHeaderHeight,"x1f5funs"),borderLeftWidth:"xe0pwq",borderInlineStartWidth:null,borderInlineEndWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${e??915}px - ${rg.suggestionsViewWidth})`),"--height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${t??540}px - ${rg.suggestionsModalHeaderHeight} - ${rg.previewHeaderHeight})`)}],comparableTitle:{...ev.g.textBodySmall,color:"x1n0bwc9",textAlign:"x2b8uid",backgroundColor:"x1v8gsql",padding:"x9cpjcd",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"xur7f20",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},comparableContainer:{position:"x10l6tqk",width:"x3hqpx7",display:"x3nfvp2",flexDirection:"xdt5ytf",height:"x5yr21d",overflow:"xb3r6kr",overflowX:null,overflowY:null,flexGrow:"x1iyjqo2",$$css:!0},currentContainer:{left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,$$css:!0},suggestedContainer:{right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,borderLeftWidth:"xe0pwq",borderInlineStartWidth:null,borderInlineEndWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},backgroundImageContainer:{backgroundRepeat:"xiy17q3",backgroundSize:"x18d0r48",backgroundPosition:"x1xsqp64",backgroundPositionX:null,backgroundPositionY:null,backgroundColor:"x1v8gsql",$$css:!0},previewContent:{...ev.g.textBodyMedium,userSelect:"x87ps6o",padding:"xiqviz9",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,display:"x78zum5",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",$$css:!0}};var at=l(301249),al=l(176576),an=l(632727),ar=l(372566),aa=l(17753);function ai({selectedFixes:e,cachedFixes:t,violatingNodeId:l,type:r,scopes:a}){let{allVariableListItems:i,variableMap:o,localVariableSetIdToSet:s,libraryVariableSetIdToSet:d,localVariables:c,libraryVariables:m}=(0,E.md)(lK({type:r,scopes:a}));return(0,n.useMemo)(()=>{let n=(0,p.UN)().get(l??""),a=t.reduce((e,{variableId:t})=>{let l=o[t];if(!l)return e;let n=l.variableSetId&&(s[l.variableSetId]??d[l.variableSetId]);return n&&e.push({id:t,variable:l,type:"LIST",variableSet:n,isSuggestion:!0}),e},[]);if(a.length>0&&(a.unshift({id:(0,lV.g)(),type:"LIST_HIERARCHY_PATH",label:(0,u.t)("design_linter.preview.suggested")}),a.push({id:(0,lV.g)(),type:"LIST_SEPARATOR"})),!n)return{fixes:e,listItems:a};let g=(0,al.TW)({node:n,resolvedType:r,localVariables:c,libraryVariableSetIdToSet:d,libraryVariables:m});return{fixes:[...e,...i.reduce((e,t)=>{if("LIST"!==t.type)return e;let{node_id:l}=t.variable,n=g.libraryVariables[l]?.resolvedValue??g.localVariables[l]?.resolvedValue;return n&&e.push({variableId:l,resolvedValue:n}),e},[])],listItems:[...a,...i],allResolvedVariables:g,variableMap:o}},[l,t,r,c,d,m,i,e,o,s])}var ao=l(921666),as=l(713196),ad=l(9106),au=l(491383),ac=l(833420),am=l(890868);function ag({ignoreViolationRow:e}){return n.createElement(tp.K,{htmlAttributes:{"data-tooltip-type":aa.Ib.TEXT,"data-tooltip":(0,u.t)("design_linter.penalty_box.ignore_suggestion_tooltip")},onClick:e,"aria-label":(0,u.t)("design_linter.penalty_box.ignore_suggestion_aria")},n.createElement(tE.A,null))}var ap=l(113752);function aE(e){let t=(0,E.md)(l_.$C);return t?.get(e)??{fix:null,status:"loading"}}function a_(e){return(0,E.md)(ln.VG).get(e)??{fix:null,status:"loading"}}let ab="suggestion_rule_blocks--chit--zCpjn";function af({blockConfig:e,children:t,icon:l,violationsByGroupKey:r}){let{getLabel:a,id:i}=e,{applyFixToBlock:o,isApplying:s}=function(e){let[t,l]=(0,n.useState)("idle");return{applyFixToBlock:(0,n.useCallback)(()=>{"running"!==t&&(l("running"),setTimeout(async()=>{try{let t;let n=(0,lS.r)();if(!n)throw Error("Design linter not available");let r=0,a=0,i=0,o=E.zl.get(l_.$C),s=[];for(let l in e){let n=e[l]??[],d=o?.get(l);if(!d?.fix?.fixContext){i++;continue}t=d.fix.ruleId,r+=n.length,a++,s.push({violations:n,fixContext:d.fix.fixContext})}await n.applyFixContextToViolations(s),l("applied"),(0,nv.DC)(r,a,i,t)}catch{(0,lb.Lt)((0,u.t)("design_linter.penalty_box.fix_failed_bell"),ap.zX.EXCLAMATION,"fix error"),(0,nv.av)(),l("error")}},0))},[t,e]),isApplying:"running"===t}}(r),{ignoreRowsWithNoSuggestions:d}=function(e){let[t,l]=(0,n.useState)("idle");return{ignoreRowsWithNoSuggestions:(0,n.useCallback)(()=>{if("running"!==t)try{let t;l("running");let n=(0,lS.r)();if(!n)return;let r=0,a=0,i=0,o=E.zl.get(l_.$C);for(let[l,s]of Object.entries(e)){let e=o?.get(l);if(e?.fix?.fixContext){i++;continue}t=e?.fix?.ruleId,r++,a+=s.length;let d=s.map(e=>e.guid);n.ignoreViolationsForGuidsWithGroupKey(d,l)}l("applied"),(0,nv.h5)(r,a,i,t)}catch{l("error"),(0,nv.Gj)()}},[t,e]),status:t}}(r),c=function(e){let t=(0,E.md)(l_.$C);return(Object.keys(e)||[]).every(e=>{let l=t?.get(e);return l?.status!=="loading"})}(r),m=function(e){let t=(0,E.md)(l_.$C);return(Object.keys(e)||[]).every(e=>{let l=t?.get(e);return!l?.fix?.fixContext&&l?.status!=="loading"})}(r),[g,p]=(0,n.useState)(!1),_=(0,n.useCallback)(()=>{if(!g){p(!0);try{d()}catch(e){p(!1)}}},[g,d]);return!r||0===Object.keys(r).length||g?null:n.createElement(aL,{key:i,label:a(),isApplying:s,isReady:c,onApply:o,onIgnore:_,shouldShowIgnore:m,icon:l},t(s))}function ax({children:e,fixStatus:t,groupKey:l,violations:r,isApplying:a}){let[i,o]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1),u=(0,E.md)(l_.E7),c=(0,n.useCallback)(()=>{if(!i){o(!0);try{let e=r.map(e=>e.guid);lS.r()?.ignoreViolationsForGuidsWithGroupKey(e,l);let t=u[l];(0,nv.dg)(e.length,t?.ruleId)}catch(e){o(!1)}}},[r,l,u,i]);if(!r||0===r.length||i)return null;let m=s&&!a;return n.createElement(n.Fragment,null,e.rowDescription?n.createElement("div",{className:"x78zum5 xbnpv00"},e.rowDescription):null,n.createElement("div",{...em.Ay.props(aw.violationRowContainer,m&&aw.hoveredViolationRowContainer),onMouseEnter:()=>{d(!0),E.zl.set(ln.hx,r)},onMouseLeave:()=>{d(!1),E.zl.set(ln.hx,[])}},n.createElement("div",{...em.Ay.props(aw.violationRowContent,m&&aw.hoveredViolationRow)},n.createElement("div",{...em.Ay.props(aw.currentValueContainer)},n.createElement("div",{...em.Ay.props(aw.currentValueContent,a&&aw.colorTextTertiary)},e.currentValue)),n.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11 x1iog12x x1db2dqx"},n.createElement(ao.o,{className:"xe5c7bq"})),n.createElement(ay,{fixStatus:t},n.createElement(n.Fragment,null,n.createElement("div",{...em.Ay.props(aw.suggestedValueSizer,m&&aw.hoveredSuggestedValueSizer)},e.suggestedValue),m?n.createElement("div",{className:"xd8780z xvy4d1p xxk0z11"},n.createElement(ag,{ignoreViolationRow:c})):null)))))}function ay({fixStatus:e,children:t}){return"loading"===e?n.createElement("div",{className:"x19y5rnk x7z60cl xmkeg23 x1y0btm7 x1yjdb4r xxbzjz2 x1l2q4c8 x78zum5 x6s0dn4"},n.createElement(nE.Wi,{className:"x5yr21d xh8yej3",opacity:33,animationType:nE.JR.SHIMMER})):t}let ah=n.forwardRef(function({onClick:e,type:t},l){return n.createElement(aI,{ref:l,onClick:e},e=>n.createElement("div",{...em.Ay.props(aw.noSuggestionFound(e))},n.createElement(aS,{type:t,isHovered:e})))});function aS({type:e,isHovered:t}){let l=(0,u.t)("design_linter.penalty_box.no_suggestion_found");return e===rW.TEXT?l=(0,u.t)("design_linter.suggestion_block.select_style"):(e===rW.COLOR||e===rW.NUMBER)&&(l=(0,u.t)("design_linter.suggestion_block.select_variable")),n.createElement(n.Fragment,null,n.createElement(aR,{type:e,isHovered:t}),n.createElement(nu.G,{text:l}))}function aR({type:e,isHovered:t}){return e===rW.COLOR?n.createElement(av,{isHovered:t}):e===rW.TEXT?n.createElement(aT,null):e===rW.NUMBER?n.createElement(ak,null):n.createElement(aO,null,n.createElement(as.Z,null))}function av({isHovered:e}){return n.createElement(aO,null,n.createElement(am.J,{color:(0,ac.E2)(e?"#D9D9D9":"#F5F5F5"),className:ab}))}function aT(){return n.createElement(aO,null,n.createElement("div",{...em.Ay.props(aw.textIcon)},"Ag"))}function ak(){return n.createElement(aO,null,n.createElement(ad.c,null))}function aC({label:e,value:t,isApplying:l}){let r=void 0!==t;return n.createElement("span",{...em.Ay.props(aw.selectedSuggestion,r&&aw.selectedSuggestionWithValue),"data-tooltip":e,"data-tooltip-type":aa.Ib.TEXT},n.createElement("div",{...em.Ay.props(aw.labelText,l&&aw.colorTextTertiary)},e),r&&n.createElement("div",{...em.Ay.props(aw.valueText,l&&aw.colorTextTertiary)},t))}let aI=n.forwardRef(function({children:e,onClick:t,tooltip:l,disabled:r=!1},a){let[i,o]=(0,nX.M)();return n.createElement("div",{ref:e=>{i(e),a&&("function"==typeof a?a(e):a.current=e)},...em.Ay.props(aw.suggestedValueContent,o&&aw.hoveredSuggestedValueContent)},n.createElement(lL.E,{onClick:t,className:"x78zum5 x6s0dn4 xjbqb8w xh8yej3 x1l2q4c8 xmzs88n x98rzlu","data-tooltip":l,"data-tooltip-type":aa.Ib.TEXT,disabled:r},e(o)))});function aL({children:e,label:t,icon:l,isApplying:r,isReady:a,onApply:i,onIgnore:o,shouldShowIgnore:s}){return n.createElement("div",{className:"x78zum5 xdt5ytf x87ps6o"},n.createElement("div",{className:"x78zum5 x10w6t97 x1qughib x84vhe8"},n.createElement("div",{className:"x78zum5 x6s0dn4 x1jnr06f"},l&&n.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k xlup9mm x1kky2od"},l),n.createElement("div",{...em.Ay.props(aw.titleContent)},t)),n.createElement(aN,{label:t,onApply:i,onIgnore:o,isApplying:r,isReady:a,shouldShowIgnore:s})),e)}function aN({label:e,isApplying:t,isReady:l,onApply:r,onIgnore:a,shouldShowIgnore:i}){return l?i?n.createElement(lL.E,{...em.Ay.props(aw.blockActionButton),onClick:a,"data-tooltip":(0,u.t)("design_linter.suggestion_block.ignore_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":aa.Ib.TEXT},(0,u.t)("general.ignore")):n.createElement(lL.E,{...em.Ay.props(aw.blockActionButton,t&&aw.blockActionButtonDisabled),onClick:r,"data-tooltip":(0,u.t)("design_linter.suggestion_block.apply_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":aa.Ib.TEXT,disabled:t},t?n.createElement(nj.k,{size:"sm"}):null,(0,u.t)("design_linter.suggestion_block.apply")):n.createElement("div",{...em.Ay.props(aw.blockActionButton,aw.blockActionButtonLoading,aw.blockActionButtonDisabled)},n.createElement(nj.k,{size:"sm"}),(0,u.t)("design_linter.suggestion_block.loading"))}function aA(){return n.createElement("div",{className:"xjm9jq1 xbpqucl x1xpthql"})}function aO({children:e,isDisabled:t}){return n.createElement("div",{...em.Ay.props(aw.suggestedValueIconContainer,t&&aw.suggestedValueIconDisabled)},e)}let aw={titleContent:{...ev.g.textBodyMedium,$$css:!0},suggestedValueIconContainer:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",height:"xxk0z11",width:"xvy4d1p",minWidth:"xnei2rj",$$css:!0},suggestedValueIconDisabled:{opacity:"x1ksfsxq",$$css:!0},blockActionButton:{...ev.g.textBodyMedium,color:"x1quhyk7",marginLeft:"x1iog12x",marginInlineStart:null,marginInlineEnd:null,gap:"xg2d0mh",rowGap:null,columnGap:null,$$css:!0},blockActionButtonLoading:{display:"x78zum5",alignItems:"x6s0dn4",$$css:!0},blockActionButtonDisabled:{color:"x1n0bwc9",$$css:!0},violationRowContainer:{display:"x78zum5",height:"x10w6t97",paddingLeft:"x163pfp",paddingRight:"xnuq7ks",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},hoveredViolationRowContainer:{paddingRight:"xy13l1i",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},hoveredViolationRow:{backgroundColor:"x30nh5c",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},violationRowContent:{display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xehqz9p",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,width:"x5c4s84",$$css:!0},currentValueContainer:{...ev.g.textBodyMedium,display:"x78zum5",color:"x1n0bwc9",alignItems:"x6s0dn4",width:"x29ncy0",minWidth:"xwrg52n",paddingLeft:"x6wrskw",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},currentValueContent:{textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},suggestedValueContent:{width:"xh8yej3",minWidth:"xgqtt45",display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,userSelect:"x87ps6o",borderWidth:"xmkeg23",borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,backgroundColor:"x1yjdb4r",flex:"x98rzlu",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},hoveredSuggestedValueContent:{backgroundColor:"x1oqziki",$$css:!0},suggestedValueSizer:{width:"xxbzjz2",height:"x1l2q4c8",display:"x78zum5",alignItems:"x6s0dn4",$$css:!0},hoveredSuggestedValueSizer:{width:"xq1dxzn",$$css:!0},selectedSuggestion:{...ev.g.textBodyMedium,display:"xrvj5dj",gridTemplateColumns:"xju1xpo",width:"xh8yej3",userSelect:"x87ps6o",$$css:!0},selectedSuggestionWithValue:{gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},labelText:{textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},valueText:{color:"x1n0bwc9",$$css:!0},noSuggestionFound:e=>[{display:"x78zum5",alignItems:"x6s0dn4",color:(e?au.Tj.textSecondary:au.Tj.textTertiary)==null?null:"xfx01vb","--color-icon":(e?au.Tj.iconSecondary:au.Tj.iconTertiary)==null?null:"xhxir3b",flex:"x98rzlu",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},{"--color":(e?au.Tj.textSecondary:au.Tj.textTertiary)!=null?e?au.Tj.textSecondary:au.Tj.textTertiary:void 0,"----color-icon":(e?au.Tj.iconSecondary:au.Tj.iconTertiary)!=null?e?au.Tj.iconSecondary:au.Tj.iconTertiary:void 0}],colorTextTertiary:{color:"x3vvef7",$$css:!0},textIcon:{...ev.g.textBodyMediumStrong,$$css:!0}};function aM({items:e}){return n.createElement("div",{className:"x78zum5 xdt5ytf"},e.map((e,t)=>e?n.createElement(n.Fragment,{key:t},t>0?n.createElement(aA,null):null,n.createElement("div",null,e)):null))}function aP(){let{blocks:e,totalViolations:t}=(0,E.md)(rK);return t?n.createElement(aM,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(af,{blockConfig:e,icon:n.createElement(at.E,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(a$,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function a$({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=aE(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ax,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{currentValue:n.createElement(aV,{context:s}),suggestedValue:n.createElement(aB,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r})})}function aV({context:e}){if(!e)return null;let t=e.color,l=e.opacity,r=`${an.z5.format(t)}${l&&l<1?` \xb7 ${function(e){let t=new ar.t6({min:0,max:100});return`${t.format(100*e)}%`}(l)}`:""}`;return n.createElement("span",{"data-tooltip":r,"data-tooltip-type":aa.Ib.TEXT},r)}function aB({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a}){let{fixContext:o,valid:s}=t??{},d=(0,n.useRef)(null),c=l0(),[m,g]=(0,E.fp)(lX),p=(0,E.Xr)(lq),_=(0,E.Xr)(lG),b=(0,E.Xr)(lj),f=(0,E.Xr)(lW),{fix:x}=a_(l),{fixContext:y}=x??{},h=o?.fixes,S=y?.fixes,R=(0,al.d$)(e),{fixes:v,listItems:T,allResolvedVariables:k,variableMap:C}=ai({selectedFixes:h??[],cachedFixes:(S??[]).slice(0,3),violatingNodeId:r,type:i.rXF.COLOR,scopes:R}),I=(0,n.useMemo)(()=>{if(!h?.length)return v[0];let e=h[0]?.variableId;if(!e||!k)return v[0];let t=k.libraryVariables[e]?.resolvedValue??k.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:v[0]},[h,k,v]),L=(0,n.useCallback)(e=>!!(e?.id&&h?.length)&&e.id===h[0]?.variableId,[h]),N=(0,n.useCallback)(t=>{if(!k||!e)return;let n=k.libraryVariables[t]?.resolvedValue??k.localVariables[t]?.resolvedValue;if(!n)return;let a={...o,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(l_.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[k,e,l,r,o]),A=(0,n.useCallback)(()=>{let e=!!m?.current&&!!d.current,t=m?.current===d.current;if(e&&t){c();return}g(d),p(!0),f(()=>L),b(()=>N),_({title:(0,u.t)("design_linter.rules.color_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:T})},[m,g,p,f,L,b,N,_,T,c]);if(!t||!s||!o||!v||0===v.length||!I||!r)return n.createElement(ah,{ref:d,onClick:A,type:rW.COLOR});let{variableId:O,resolvedValue:w}=I,M=(C??{})[O]?.name,P=w.value;return P&&M?n.createElement(aI,{ref:d,onClick:A,tooltip:M,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(am.J,{color:P,opacity:P.a,className:tb()(ab)})),n.createElement(aC,{label:M,isApplying:a}))):n.createElement(ah,{ref:d,onClick:A,type:rW.COLOR})}var az=l(577972),aD=l(88706);function aF(){let{blocks:e,totalViolations:t}=(0,E.md)(rJ);return t?n.createElement(aM,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(af,{blockConfig:e,icon:n.createElement(az.k,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>n.createElement(aU,{key:t,violations:l,groupKey:t,isApplying:e})))))}):null}function aU({violations:e,groupKey:t,isApplying:l}){let r=e[0],{fix:a,status:i}=aE(t);return r?.detectionContext?n.createElement(ax,{fixStatus:i,groupKey:t,violations:e,isApplying:l},{currentValue:n.createElement(aH,{context:r.detectionContext}),suggestedValue:n.createElement(aG,{fix:a,groupKey:t,isApplying:l})}):null}function aH({context:e}){return e&&"components"in e?n.createElement("span",{"data-tooltip":e.name,"data-tooltip-type":aa.Ib.TEXT},e.name):null}function aG({fix:e,groupKey:t,isApplying:l}){let{fixContext:r,guid:a,valid:i}=e??{},o=(0,n.useRef)(null),[s,d]=(0,E.fp)(lX),c=r??{},m=(0,E.Xr)(lq),g=(0,E.Xr)(lG),p=(0,E.Xr)(lj),_=(0,E.Xr)(lW),b=l0(),{listItems:f,componentsById:x}=(0,n.useMemo)(()=>{if(!c?.components)return{listItems:[],componentsById:{}};let e=[],t={};return c.components.forEach(l=>{let n={id:l.id??"",name:l.name,type:"GRID",thumbnail_url:l.thumbnail_url};e.push(n),l.id&&(t[l.id]=l)}),{listItems:e,componentsById:t}},[c]),y=(0,n.useCallback)(t=>{let l=e?.fixContext?.components?.[0]?.id;return!!(t?.id&&x?.length)&&t.id===l},[x,e?.fixContext]),h=(0,n.useCallback)(e=>{let l=x[e];if(!l)return;let n={...r,components:[l]};E.zl.set(l_.Sg,{groupKey:t,selectedFixItem:{fix:{ruleId:rN.C.COMPONENT_MATCH,guid:a??"",valid:!0,fixContext:n},status:"loaded"}})},[x,t,a,r]),S=(0,n.useCallback)(()=>{let e=!!s?.current&&!!o.current,t=s?.current===o.current;if(e&&t){b();return}_(()=>y),p(()=>h),d(o),m(!0),g({title:(0,u.t)("design_linter.rules.component_match.dropdown_title"),emptyLabel:"",display:"GRID",items:f})},[s,d,m,_,y,p,h,g,f,b]),R=(c.components??[])[0];return e&&i&&r&&R?n.createElement(aI,{onClick:S,ref:o,disabled:l},()=>n.createElement(n.Fragment,null,n.createElement(aC,{label:R.name,isApplying:l}),n.createElement(aD.r,null))):n.createElement(ah,{onClick:S,type:rW.DEFAULT})}function aj(){let{blocks:e,totalViolations:t}=(0,E.md)(rY);return t?n.createElement(aM,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(af,{blockConfig:e,icon:n.createElement(ad.c,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(aW,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function aW({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=aE(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ax,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{currentValue:n.createElement(aq,{context:s}),suggestedValue:n.createElement(aX,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r})})}function aq({context:e}){if(!e)return null;let t=e.numericValue;return n.createElement("span",{"data-tooltip":t,"data-tooltip-type":aa.Ib.TEXT},t)}function aX({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a}){let{fixContext:o,valid:s}=t??{},d=(0,n.useRef)(null),c=l0(),[m,g]=(0,E.fp)(lX),p=(0,E.Xr)(lq),_=(0,E.Xr)(lG),b=(0,E.Xr)(lj),f=(0,E.Xr)(lW),{fix:x}=a_(l),{fixContext:y}=x??{},h=o?.fixes,S=y?.fixes,R=(0,al.d$)(e),{fixes:v,listItems:T,allResolvedVariables:k,variableMap:C}=ai({selectedFixes:h??[],cachedFixes:(S??[]).slice(0,3),violatingNodeId:r,type:i.rXF.FLOAT,scopes:R}),I=(0,n.useMemo)(()=>{if(!h?.length)return v[0];let e=h[0]?.variableId;if(!e||!k)return v[0];let t=k.libraryVariables[e]?.resolvedValue??k.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:v[0]},[h,k,v]),L=(0,n.useCallback)(e=>!!(e?.id&&h?.length)&&e.id===h[0]?.variableId,[h]),N=(0,n.useCallback)(t=>{if(!k||!e)return;let n=k.libraryVariables[t]?.resolvedValue??k.localVariables[t]?.resolvedValue;if(!n)return;let a={...o,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(l_.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[k,e,l,r,o]),A=(0,n.useCallback)(()=>{let e=!!m?.current&&!!d.current,t=m?.current===d.current;if(e&&t){c();return}g(d),p(!0),f(()=>L),b(()=>N),_({title:(0,u.t)("design_linter.rules.number_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:T})},[m,g,p,f,L,b,N,_,T,c]);if(!t||!s||!o||!v||0===v.length||!I||!r)return n.createElement(ah,{ref:d,onClick:A,type:rW.NUMBER});let{variableId:O,resolvedValue:w}=I,M=(C??{})[O]?.name,P=w.value;return M?n.createElement(aI,{ref:d,onClick:A,tooltip:M,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(ad.c,null)),n.createElement(aC,{label:M,value:P,isApplying:a}))):n.createElement(ah,{ref:d,onClick:A,type:rW.NUMBER})}var aK=l(907727),aY=l(802070),aQ=l(45341);function aJ(){let{blocks:e,totalViolations:t}=(0,E.md)(rZ);return t?n.createElement(aM,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(af,{blockConfig:e,icon:null,key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(aZ,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function aZ({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=aE(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ax,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{rowDescription:n.createElement(a5,{context:s,fix:i}),currentValue:n.createElement(a0,{context:s}),suggestedValue:n.createElement(a1,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r})})}function a0({context:e}){if(!e)return null;let t=e.fillColor,l=e.fillOpacity,r=`${an.z5.format(t)}${l&&l<1?` \xb7 ${function(e){let t=new ar.t6({min:0,max:100});return`${t.format(100*e)}%`}(l)}`:""}`;return n.createElement("span",{"data-tooltip":r,"data-tooltip-type":aa.Ib.TEXT},r)}function a1({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a}){let{fixContext:o,valid:s}=t??{},d=(0,n.useRef)(null),c=l0(),[m,g]=(0,E.fp)(lX),p=(0,E.Xr)(lq),_=(0,E.Xr)(lG),b=(0,E.Xr)(lj),f=(0,E.Xr)(lW),{fix:x}=a_(l),{fixContext:y}=x??{},h=o?.fixes,S=y?.fixes,R=(0,al.d$)(e),{fixes:v,listItems:T,allResolvedVariables:k,variableMap:C}=ai({selectedFixes:h??[],cachedFixes:(S??[]).slice(0,3),violatingNodeId:r,type:i.rXF.COLOR,scopes:R}),I=(0,n.useMemo)(()=>{if(!h?.length)return v[0];let e=h[0]?.variableId;if(!e||!k)return v[0];let t=k.libraryVariables[e]?.resolvedValue??k.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:v[0]},[h,k,v]),L=(0,n.useCallback)(e=>!!(e?.id&&h?.length)&&e.id===h[0]?.variableId,[h]),N=(0,n.useCallback)(t=>{if(!k||!e)return;let n=k.libraryVariables[t]?.resolvedValue??k.localVariables[t]?.resolvedValue;if(!n)return;let a={...o,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(l_.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[k,e,l,r,o]),A=(0,n.useCallback)(()=>{let e=!!m?.current&&!!d.current,t=m?.current===d.current;if(e&&t){c();return}g(d),p(!0),f(()=>L),b(()=>N),_({title:(0,u.t)("design_linter.rules.color_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:T})},[m,g,p,f,L,b,N,_,T,c]);if(!t||!s||!o||!v||0===v.length||!I||!r)return n.createElement(ah,{ref:d,onClick:A,type:rW.COLOR});let{variableId:O,resolvedValue:w}=I,M=(C??{})[O]?.name,P=w.value;return P&&M?n.createElement(aI,{ref:d,onClick:A,tooltip:M,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(am.J,{color:P,opacity:P.a,className:tb()(ab)})),n.createElement(aC,{label:M,isApplying:a}))):n.createElement(ah,{ref:d,onClick:A,type:rW.COLOR})}function a5({context:e,fix:t}){let l=(0,n.useMemo)(()=>{if(!t||!e)return!1;let{contrastRatios:l}=e;if(!l)return!1;let n=t.fixContext?.fixes[0]?.resolvedValue?.value;if(!n)return!1;let{aaPass:r}=(0,aQ.Ef)((0,li.Hu)(n),e.backgroundColor,l.AA,l.AAA);return!!r},[e,t]);return n.createElement("div",{...em.Ay.props(a8.contrastCheck,l?a8.passing:a8.failing)},l?n.createElement(aK.l,null):n.createElement(aY.X,null),(0,u.t)("design_linter.suggestion_block.text_background_contrast_aa.aaStandard"))}let a8={contrastCheck:{display:"x78zum5",alignItems:"x6s0dn4",gap:"x195vfkc",rowGap:null,columnGap:null,$$css:!0},passing:{color:"xq6u9c4","--color-icon":"x11vm0g5",$$css:!0},failing:{color:"x1akne3o","--color-icon":"xbzrb6o",$$css:!0}};function a7(){let{blocks:e,totalViolations:t}=(0,E.md)(rQ);return t?n.createElement(aM,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(af,{blockConfig:e,icon:n.createElement(a6,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>n.createElement(a4,{key:t,violations:l,groupKey:t,isApplying:e})))))}):null}function a6(){return n.createElement("div",{...em.Ay.props(a9.textIcon)},"Ag")}function a4({groupKey:e,violations:t,isApplying:l}){let r=t[0],{fix:a,status:i}=aE(e);return r?.detectionContext?n.createElement(ax,{fixStatus:i,groupKey:e,violations:t,isApplying:l},{currentValue:n.createElement(a3,{context:r.detectionContext}),suggestedValue:n.createElement(a2,{fix:a,groupKey:e,isApplying:l})}):null}function a3({context:e}){let{fontFamily:t,fontSize:l,lineHeight:r}=e,a=`${t} ${l}, ${r}`;return n.createElement("span",{"data-tooltip":a,"data-tooltip-type":aa.Ib.TEXT},a)}function a2({fix:e,groupKey:t,isApplying:l}){let{fixContext:r,valid:a}=e??{},i=(0,n.useRef)(null),[o,s]=(0,E.fp)(lX),d=(0,E.Xr)(lq),c=(0,E.Xr)(lG),m=(0,E.Xr)(lj),g=(0,E.Xr)(lW),p=l0(),{fix:_}=a_(t),{fixContext:b}=_??{},f=r?.styles,{allStyles:x,listItems:y,styleNodeIdToStyle:h}=function({selectedStyles:e,cachedStyles:t}){let{listItems:l,allStyles:r}=(0,E.md)(lY);return(0,n.useMemo)(()=>{let n=[],a={};for(let e of(t.forEach(e=>{n.push({id:e.node_id,type:"TEXT_STYLE_LIST",style:e,isSuggestion:!0}),a[e.node_id]=e}),n.length>0&&(n.push({id:(0,lV.g)(),type:"LIST_SEPARATOR"}),n.unshift({id:(0,lV.g)(),type:"LIST_HIERARCHY_PATH",label:(0,u.t)("design_linter.preview.suggested")})),r))a[e.node_id]=e;return{listItems:[...n,...l],allStyles:[...e,...r],styleNodeIdToStyle:a}},[r,l,e,t])}({selectedStyles:f??[],cachedStyles:(b?.styles??[]).slice(0,1)}),S=f?.length?f[0]:x[0],R=(0,n.useCallback)(e=>!!(e?.id&&f?.length)&&e.id===f?.[0]?.node_id,[f]),v=(0,n.useCallback)(l=>{let n=h[l];if(!n)return;let a={...r,styles:[n]};E.zl.set(l_.Sg,{groupKey:t,selectedFixItem:{fix:{ruleId:rN.C.REQUIRE_TEXT_STYLES,guid:e?.guid??"",valid:!0,fixContext:a},status:"loaded"}})},[h,t,e?.guid,r]),T=(0,n.useCallback)(()=>{if(l)return;let e=!!o?.current&&!!i.current,t=o?.current===i.current;if(e&&t){p();return}g(()=>R),m(()=>v),c({title:(0,u.t)("design_linter.rules.text_styles.dropdown_title"),emptyLabel:"",display:"LIST",items:y}),s(i),d(!0)},[p,o,l,R,y,v,s,d,g,c,m]);return e&&a&&r&&S?n.createElement(aI,{ref:i,onClick:T,tooltip:S.name},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:l},n.createElement(am.J,{fillStyle:S,className:ab})),n.createElement(aC,{label:S.name,isApplying:l}))):n.createElement(ah,{ref:i,onClick:T,type:rW.TEXT})}let a9={textIcon:{...ev.g.textBodyMediumStrong,width:"x1kky2od",height:"xlup9mm",$$css:!0}},ie=n.memo(function(){let e=l0(),t=0===(0,E.md)(rq).violationCount,l=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rK);return!!e.length&&!!t}(),r=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rQ);return!!e.length&&!!t}(),a=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rY);return!!e.length&&!!t}(),i=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rJ);return!!e.length&&!!t}(),o=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rZ);return!!e.length&&!!t}(),{nextGroup:s,hasNextGroup:d}=function(){let e=(0,E.md)(l_.NM),t=(0,n.useRef)(null),l=(0,n.useRef)(null),r=(0,E.md)(l_.Bd);return(0,n.useEffect)(()=>{if(!(l.current!==e))return;l.current=e;let n=r.map(e=>e.id),a=n.findIndex(t=>t===e);t.current=-1!==a?n.slice(a+1):n},[e,r]),{nextGroup:(0,n.useCallback)(()=>{if(!t.current||!r.length)return;let e=r.reduce((e,t)=>(e.add(t.id),e),new Set),l="";for(let n=0;n<t.current.length;n++){let r=t.current[n]??"";if(e.has(r)){l=r;break}}if(!l){let e=r[0]?.id??"";if(!e){E.zl.set(l_._M,lo.FR.ALL_VISUAL_GROUPS_VIEW);return}l=e}(0,nv.n7)(),E.zl.set(l_.NM,l),E.zl.set(rm)},[r]),hasNextGroup:r.length>0}}();if(t)return n.createElement("div",{...em.xk(il.noViolations)},(0,u.tx)("design_linter.modal.group_suggestions_completed"),d?n.createElement(lx.$n,{variant:"primary",onClick:s},(0,u.tx)("general.next")):null);let c=[];return l&&c.push(n.createElement(aP,{key:"color-variables"})),r&&c.push(n.createElement(a7,{key:"text-styles"})),a&&c.push(n.createElement(aj,{key:"number-variables"})),i&&c.push(n.createElement(aF,{key:"components"})),o&&c.push(n.createElement(aJ,{key:"text-background-contrast"})),n.createElement("div",{className:"x78zum5 xdt5ytf x5yr21d x1rife3k xp6roeo",onScroll:e},n.createElement("div",{className:"x78zum5 xdt5ytf x1gskr33"},c.map((e,t)=>n.createElement(n.Fragment,{key:e.key},t>0&&n.createElement(aA,null),e))))}),it=(0,n.memo)(function(){return!function(){let e=(0,E.md)(l_.vu);(0,n.useEffect)(()=>{e.length&&i.Egt?.replaceSelection(e,!0)},[e])}(),(0,b.h)(()=>{E.zl.set(rm)}),n.createElement("div",{className:"x78zum5 x1v8gsql x5yr21d xh8yej3"},n.createElement("div",{className:"x78zum5 xdt5ytf x5yr21d xqo8coc xuhaxrz x1yjdb4r"},(0,o.k)().aip_flower_garden_debug&&n.createElement(rc,null),n.createElement(ie,null)),n.createElement(r8,null))}),il={noViolations:{...ev.g.textBodyMedium,color:"x1n0bwc9",display:"x78zum5",justifyContent:"xl56j7k",alignItems:"x6s0dn4",userSelect:"x87ps6o",flexDirection:"xdt5ytf",gap:"x1i71x30",rowGap:null,columnGap:null,height:"x5yr21d",$$css:!0}},ir=n.memo(function(){let e=lf(),t=0===(0,E.md)(ln.Kk),l=(0,E.md)(l_._M);return e?n.createElement("div",{className:"x78zum5 xh8yej3 x5yr21d xdt5ytf x6s0dn4 xl56j7k x1nfngrj"},n.createElement(nj.k,null),n.createElement("span",{...em.xk(ia.loadingText)},(0,u.tx)("design_linter.modal.loading")),(0,o.k)().aip_flower_garden_debug&&n.createElement(rc,null)):l===lo.FR.SELECTED_VISUAL_GROUP_VIEW?n.createElement(it,null):t?n.createElement("div",{"data-testid":"design-linter-container-no-violations",...em.xk(ia.noViolationsContainer)},n.createElement("div",{className:"x78zum5 xl56j7k x87ps6o xdt5ytf x6s0dn4"},n.createElement("span",null,(0,u.tx)("design_linter.modal.suggestions_completed")),(0,o.k)().aip_flower_garden_debug&&n.createElement(rc,null))):n.createElement(n8,null)}),ia={loadingText:{color:"x1n0bwc9",...ev.g.textBodyLarge,marginLeft:"xrybvsa",marginRight:"x17qaar8",marginInlineStart:null,marginInlineEnd:null,textAlign:"x2b8uid",userSelect:"x87ps6o",$$css:!0},noViolationsContainer:{color:"x1n0bwc9",...ev.g.textBodyMedium,display:"x78zum5",width:"xh8yej3",height:"x5yr21d",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",$$css:!0}},ii=(0,nU.jz)(lJ);function io(){let e=nV.ox(),t=function(){let e=(0,tk.GQ)(),t=(0,E.md)(l_._M),l=(0,n.useMemo)(()=>new nG.Mi(e+(0,nU.jz)(lJ),(0,nU.jz)(lJ)),[e]),[{windowInnerHeight:r,windowInnerWidth:a}]=(0,nF.A)((0,nH.l)(),300,{equalityFn:n$.c2}),i=915,o=540;return t===lo.FR.ALL_VISUAL_GROUPS_VIEW&&(i=336,o=475),{initialPosition:l,maxHeight:r-2*ii,minHeight:250,minWidth:400,initialHeight:o,initialWidth:Math.min(a-2*ii,i)}}(),l=function(){let e=(0,E.Xr)(l_.$H);return(0,n.useMemo)(()=>lO()(t=>{e(t)},100),[e])}(),r=function(){let e=(0,E.Xr)(l_.r4);return(0,n.useMemo)(()=>lO()(t=>{e(t)},100),[e])}(),a=l0(),[o,s]=(0,E.fp)(l_._M),d=(0,n.useCallback)(e=>{e.size&&l(e.size),r(e.position)},[r,l]);return(0,b.h)(()=>{l({x:t.initialWidth,y:t.initialHeight}),r({x:t.initialPosition.x,y:t.initialPosition.y})}),(0,n.useLayoutEffect)(()=>{let t=475,n=336;o===lo.FR.SELECTED_VISUAL_GROUP_VIEW&&(t=540,n=915);let r=new nG.Mi(n,t);e.setSize(r),l(r)},[o,l,e]),(0,nv.ZE)(),n.createElement(lC._L,{defaultWidth:t.initialWidth,defaultHeight:t.initialHeight,defaultPosition:{left:t.initialPosition.x,top:t.initialPosition.y},constraints:{maxHeight:t.maxHeight},manager:e,onClose:({source:e})=>{"outside"!==e&&(a(),i.Ez5?.uiState().showDesignLinter.set(!1),s(lo.FR.ALL_VISUAL_GROUPS_VIEW),lS.r()?.clearLinterScene())},onTransform:d},n.createElement(ed.vo,null,n.createElement(ed.Y9,null,n.createElement(is,null)),n.createElement(ed.nB,{padding:0,scrolling:"none",className:"xb3r6kr"},n.createElement(ir,null))),n.createElement(l1,null))}function is(){let[e,t]=(0,E.fp)(l_._M);return e===lo.FR.SELECTED_VISUAL_GROUP_VIEW?n.createElement("div",{className:"xt0e3qv x87ps6o xh8yej3"},n.createElement(id,{showBackButton:!0,onBackClick:()=>t(lo.FR.ALL_VISUAL_GROUPS_VIEW)})):n.createElement("div",{className:"xt0e3qv x87ps6o xh8yej3 x8rdmch"},n.createElement(id,null))}function id({showBackButton:e=!1,onBackClick:t}){let l=lf();return n.createElement("div",{className:"x78zum5 x1qughib x6s0dn4"},n.createElement("div",{className:"x78zum5 xg2d0mh x6s0dn4"},e&&t&&n.createElement(lL.E,{onClick:t},n.createElement(nB.C,null),n.createElement("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3"},l?(0,u.tx)("design_linter.title"):(0,u.tx)("design_linter.review_title"))),!e&&n.createElement("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3"},l?(0,u.tx)("design_linter.title"):(0,u.tx)("design_linter.review_title")),n.createElement(lk.y,{helpUrlVariant:lT.JT.DETECT_VIOLATIONS})),n.createElement("div",{className:"x78zum5 xg2d0mh x1057jvv"},n.createElement(ic,null),n.createElement(iu,null)))}function iu(){let[e,t]=(0,E.fp)(l_._M);return n.createElement(tp.K,{onClick:()=>{e===lo.FR.SELECTED_VISUAL_GROUP_VIEW?t(lo.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW):t(lo.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW)},"aria-label":(0,u.t)("design_linter.penalty_box.open_library_selector_aria")},n.createElement(nz.l,null))}function ic(){let e=(0,E.Xr)(l_._M),t=lf(),l=(0,n.useCallback)(()=>{(0,nv.il)(),lS.r()?.requestDetection(!0),e(lo.FR.ALL_VISUAL_GROUPS_VIEW)},[e]);return n.createElement(tp.K,{onClick:l,"aria-label":(0,u.t)("design_linter.modal.penalty_box.refresh_button_tooltip"),disabled:t},n.createElement(nD.T,null))}function im(){return(0,ln.qZ)()?n.createElement(n.Fragment,null,!!(0,o.k)().aip_flower_garden_ts&&n.createElement(nM,null),n.createElement(ig,null)):null}let ig=n.memo(()=>{let e=(0,eY.J2)(i.Ez5.uiState().showDesignLinter),t=(0,E.md)(ln.FD),l=function(){let e=(0,E.md)(l_._M);return(0,lb.y4)(e)}();return((0,n.useEffect)(()=>()=>{i.Ez5?.uiState()?.showDesignLinter?.set(!1)},[]),!function(){let e=(0,E.Xr)(ln.v4),t=(0,lu.pN)(),l=t.data?.libraryVariables,r=t.data?.libraryVariableSets,a=(0,E.md)(ln.Ut);(0,n.useEffect)(()=>{if(a.size<1){(0,lr.PN)()&&e(e=>({...e,status:"loaded"}));return}if("errors"===t.status){e(e=>({...e,status:"error"}));return}if("loaded"!==t.status)return;let n=new AbortController,i=n.signal;return async function(){if(!r||!l)return;e(e=>({...e,status:"loading"}));let t=new Set,n=[];r.forEach(e=>{a.has(e.library_key)&&(n.push(e),t.add(e.library_key))});for(let e=0;e<n.length;e+=2){if(i.aborted)return;let t=n.slice(e,e+2).map(e=>(0,ld.RI)(e));await Promise.allSettled(t)}e({libraryVariables:l,libraryVariableSetIdToSet:n.reduce((e,t)=>(t.node_id&&(e[t.node_id]=t),e),{}),status:"loaded",libraryKeys:t})}(),()=>{n.abort()}},[t.status,r,l,a,e])}(),!function(){let e=(0,E.md)(ln.Ut);(0,n.useEffect)(()=>{let t=[...e].map(e=>e.toString());(0,lp.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"FLOAT",max_results_per_library:100}),(0,lp.kA)({library_keys:t,entity_type:"STYLE",entity_value_type:"TEXT",max_results_per_library:100}),(0,ls.w0)(li.yA).then(e=>{let l=e.get(li.tS,li.Iv);(0,lp.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"COLOR",max_results_per_library:l})})},[e])}(),!function(){let e=(0,lm.n)(),t=(0,lc.eS)(lc.aD.CURRENT),l=(0,E.Xr)(lE._),r=(0,n.useMemo)(()=>{if((0,o.k)().aip_flower_garden_component_update&&e)return(0,lg.n)(t,e,lc.aD.CURRENT)},[t,e]);(0,n.useEffect)(()=>{(0,o.k)().aip_flower_garden_component_update&&r&&l({status:"loaded",checkpoints:E.zl.get(r)})},[r,l])}(),(0,nv.fx)(e,"ACTIONS_MENU"),!e||t)?null:l?n.createElement(nT,null):n.createElement(io,null)});var ip=l(809761),iE=l(868489),i_=l(701455),ib=l(408742),ix=l(868840),iy=l(853733),ih=l(353620),iS=l(510273);function iR({children:e}){return n.createElement(iS.G.Provider,{value:{loggerEventName:"design_navigate"}},n.createElement(iy.s.Provider,{value:{allowLibraryPublish:!0}},n.createElement(ih.y0.Provider,{value:ih.X},e)))}var iv=l(813009),iT=l(797688),ik=l(995218),iC=l(330362),iI=l(959750),iL=l(831271),iN=l(922484),iA=l(407638),iO=l(259964),iw=l(450651),iM=l(730455),iP=l(858160),i$=l(897763),iV=l(963307),iB=l(394882),iz=l(698429),iD=l(24508),iF=l(231563);function iU({dropdownShown:e,pickerShown:t,saveAsState:l,sceneGraphSelection:a}){let i=(0,r.wA)(),o=(0,ts.q5)(),s=(0,e$.p8)("currentPage"),d=(0,e$.p8)("isReadOnly"),c=(0,e$.p8)("currentSelectedProperty"),m=(0,iz.ks)(),g=d&&!m,p=(0,iV.Gt)("numSelected"),{exportSettings:E}=(0,iV.pw)("exportSettings"),_=(0,iD.Wd)();return n.createElement(iB.VF,{isVisible:!0},()=>n.createElement(iD.LI,{key:"export",currentPage:s,currentSelectedProperty:c,dispatch:i,dropdownShown:e,exportSettings:E,isSelectionRenamable:iD.LI.isSelectionRenamable(Object.keys(a)),numSelected:p,openFile:o,panelWidth:iF.iP,pickerShown:t,recordingKey:"exportsPanel",saveAsState:l,sceneGraphSelection:a,singleNodeName:_,standalone:!0,title:g?(0,u.t)("fullscreen.properties_panel.export"):(0,u.t)("fullscreen.properties_panel.presets")}))}var iH=l(714327),iG=l(991675),ij=l(919645),iW=l(247852),iq=l(827930),iX=l(340427);function iK({scrollContainer:e}){let t=(0,ts.q5)(),l=(0,e$.KH)(),r=(0,iV.Gt)("prototypeStartingPointsInfo"),a=!r||r.length>0,i=0===Object.keys(l).length,o=t?.canEdit,s=n.createElement(iB.VF,{isVisible:i&&!o&&a},()=>n.createElement(iX.A,{viewOnly:!0})),d=n.createElement(iB.VF,{isVisible:i},()=>n.createElement(ij.Q,{key:"code-local-styles",recordingKey:"code-local-styles",scrollContainer:e}));return n.createElement(eT.fu,{name:iG.e0.CODE_PANEL},n.createElement(iW.Mw,{panelName:iW.ON.INSPECT}),n.createElement(iq.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:s,localStylesPanel:d}))}var iY=l(562026),iQ=l(596224),iJ=l(257009),iZ=l(587995),i0=l(612499);function i1({dropdownShown:e,expandedFramePresetType:t,pickerShown:l,sceneGraphSelection:a,shownPanels:o,userFlags:s}){let d=(0,r.wA)(),u=(0,ts.q5)(),c=(0,iQ.cJ)(),m=(0,iV.tN)("containsResponsiveSets"),g=!o[i.ibQ.FRAME_PRESETS]&&!o[i.ibQ.PENCIL_TOOL]&&!m;return n.createElement(n.Fragment,null,n.createElement(iB.VF,{isVisible:o[i.ibQ.FRAME_PRESETS]},()=>n.createElement(iJ.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:d,expandedFramePresetType:t})),!c&&n.createElement(iB.VF,{isVisible:o[i.ibQ.PENCIL_TOOL]},()=>n.createElement(iZ.q,{id:"pencilToolPanel",key:"pencilToolPanel",recordingKey:"pencilToolPanel",openFile:u})),n.createElement(iB.VF,{isVisible:g},()=>n.createElement(i0.Z0,{key:"prototype",recordingKey:"prototypePanel",dropdownShown:e,pickerShown:l,sceneGraphSelection:a,shouldUseSelectedStyleProperties:!0,userFlags:s})))}function i5({scrollContainer:e,refMainScrollContainer:t,...l}){(0,iH.S2)();let r=(0,iC.k)(),a=l.propertiesPanelTab,o=(0,e$.p8)("topLevelMode"),s=(0,iF.Dj)(l.user),d=o!==i.lyf.PREVIEW&&(o!==i.lyf.BRANCHING||!s)&&o!==i.lyf.DEV_HANDOFF&&a===i.FAf.DESIGN,u=o!==i.lyf.PREVIEW&&o!==i.lyf.BRANCHING&&a===i.FAf.PROTOTYPE,c=o===i.lyf.PREVIEW&&!l.userStateLoaded&&!r||a===i.FAf.INSPECT,m=a===i.FAf.EXPORT,g=a===i.FAf.COMMENT;return n.createElement(n.Fragment,null,d&&n.createElement(i$.Y,{scrollContainer:e,...l}),u&&n.createElement(i1,{dropdownShown:l.dropdownShown,expandedFramePresetType:l.expandedFramePresetType,pickerShown:l.pickerShown,sceneGraphSelection:l.sceneGraphSelection,shownPanels:l.shownPanels,userFlags:l.userFlags}),c&&n.createElement(iK,{scrollContainer:e}),m&&n.createElement(iU,{dropdownShown:l.dropdownShown,pickerShown:l.pickerShown,saveAsState:l.saveAsState,sceneGraphSelection:l.sceneGraphSelection}),g&&n.createElement(l.commentsPanel,null))}function i8(e){!function(){let e="ui3"===(0,iM.DP)().version,{isPropertiesPanelCollapsed:t,setPropertiesPanelCollapsed:l}=(0,iP.iT)(),a=(0,tk.Ye)(),o=(0,ik.ow)(),s=(0,e$.ax)(),d=(0,e$.dH)(),u=d===i.NLJ.FRAME||d===i.NLJ.COMMENTS||d===i.NLJ.VECTOR_PENCIL,c=(0,r.d4)(e=>e.mirror.appModel.activeUserAction===i.QOV.DEFAULT),m=(0,iP.ys)();(0,n.useEffect)(()=>{e&&c&&!o&&t&&(u||s)&&l(!1)},[s,c,d,e,l,t,a,u,o]),(0,n.useEffect)(()=>{m&&l(!0)},[m,l,t])}();let t=null,l=e=>{t=e};return n.createElement(iY.j,{recordingKey:e.recordingKey,activeTab:e.propertiesPanelTab,refMainScrollContainer:l},n.createElement(i5,{...e,scrollContainer:t,refMainScrollContainer:l}))}var i7=l(620512),i6=l(493209),i4=l(459762),i3=l(719486);let i2=n.memo(function(){let e=(0,iv.R)(e=>(0,iA.getPermissionsState)(e)),t=(0,e$.aV)(),l=(0,r.d4)(e=>e.loadingState),a=(0,p.UN)(),s=(0,r.d4)(e=>e.mirror.sceneGraphSelection),d=(0,r.d4)(e=>e.currentUserOrgId),u=(0,r.d4)(e=>e.dropdownShown),c=(0,r.d4)(e=>e.fonts),m=(0,r.d4)(e=>e.fileVersion),g=(0,r.d4)(e=>e.installedPluginVersions),E=(0,r.d4)(e=>e.library),_=(0,r.d4)(e=>e.localPlugins),b=(0,r.d4)(e=>e.modalShown),f=(0,r.d4)(e=>e.openFile),x=(0,r.d4)(e=>e.pickerShown),y=(0,r.d4)(e=>e.pickerInStyleCreationShown),h=(0,r.d4)(e=>e.publishedPlugins),S=(0,r.d4)(e=>e.saveAsState),R=(0,r.d4)(e=>e.selectedView),v=(0,r.d4)(e=>e.voice.showWidget),T=(0,r.d4)(e=>e.stylePickerListLayout),k=(0,r.d4)(e=>e.stylePickerShown),C=(0,r.d4)(e=>e.stylePreviewShown),I=(0,r.d4)(e=>e.styleSets),L=(0,r.d4)(e=>e.usedKeyboardShortcuts),N=(0,r.d4)(e=>e.user),A=(0,r.d4)(e=>e.userFlags),O=(0,r.d4)(e=>e.userStateLoaded),w=(0,r.d4)(e=>e.repos),M=(0,r.d4)(e=>e.folders),P=(0,r.d4)(e=>e.teams),$=(0,r.d4)(e=>e.orgById),V=(0,r.d4)(e=>e.orgUsersByOrgId),B=(0,r.d4)(e=>e.userEduGracePeriods),z=(0,r.d4)(e=>e.licenseGroups),D=(0,tn.GS)(),F=(0,ik.my)()===iO.nT.Design,U=(0,iC.k)(),H=(0,iN.VP)(l,"edit_button_upgrading_to_edit"),G=t||H,j=(0,eY.ut)((0,ej.aY)(),i.FAf.DESIGN),W=(0,eY.J2)(i.Ez5.propertiesPanelState().shownPropertiesPanels),q=(0,eY.J2)((0,iI.UK)().expandedFramePresetType),X=(0,iI.Ku)(),K=(0,iI.qw)(),Y=(0,eY.J2)(i.Ez5.uiState().showPropertiesPanel),Q=!(0,iT.Oo)()&&D&&Y,J=(0,eY.J2)((0,iI.UK)().renderRulers),{isRightPanelCollapsed:Z}=(0,n.useContext)(iw.t),{inProductHelpViewType:ee}=(0,tT.A5)(),et=(0,eY.J2)(i.Ez5.uiState().inProductHelpSidePanelWidth),el=(0,iL.T)(),en=(0,iL.q)(),er=(0,n.useMemo)(()=>U?i.FAf.COMMENT:j,[j,U]);return(0,n.useEffect)(()=>{er!==j&&ej.aY()?.set(er)},[er,j]),n.createElement(i3.o,{boundaryKey:"PropertiesPanel",loggedOutDesktopRevampExpAvaialable:F},n.createElement(i8,{key:(0,lv.tw)()??void 0,allSavedPlugins:g,colorFormat:X,commentsPanel:i4.L,currentUserOrgId:d,dropdownShown:u,expandedFramePresetType:q,fileVersion:m,folders:M,fonts:c,hasMergedDimensionsAndAutolayout:D,inProductHelpSidePanelWidth:et,inProductHelpViewType:ee,isCollapsed:Z,isLoading:G,isUI3:D,isUIMinimized:en,justChangedMinimizeUIValue:el,library:E,licenseGroups:z,localPlugins:_,modalShown:b,openFile:f,orgById:$,orgUsersByOrgId:V,permissionsState:e,pickerInStyleCreationShown:y,pickerShown:x,propertiesPanelSplitPosition:K,propertiesPanelTab:er,publishedPlugins:h,recordingKey:"propertiesPanel",repos:w,rulersVisible:J,saveAsState:S,sceneGraph:a,sceneGraphSelection:s,selectedView:R,shouldAnimateLoadingState:t,shouldShowBackgroundGradient:Q,showVoiceWidget:v,shownPanels:W,stylePickerListLayout:T,stylePickerShown:k,stylePreviewShown:C,styleSets:I,teams:P,usedKeyboardShortcuts:L,user:N,userEduGracePeriods:B,userFlags:A,userStateLoaded:O}),(0,o.k)().asset_binding_picker?n.createElement(i6.lD,null):n.createElement(i7.tZ,null))});var i9=l(299520),oe=l(17726),ot=l(473935),ol=l(879894),on=l(188775),or=l(612803),oa=l(904617),oi=l(776740),oo=l(47003),os=l(759102),od=l(304756),ou=l(87463),oc=l(18584),om=l(704410),og=l(526697);function op(){let e=(0,R.e)({overlay:O.Dqt,priority:I.N.DEFAULT_MODAL});(0,S.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,_.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,n.useCallback)(async()=>{(0,_.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await od.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return n.createElement(oc.h,{isShowing:e.isShowing,modalType:om.q3.FEATURE_UPDATE,closeButtonStyle:om.M_.ON_DARK,element:()=>n.createElement(oE,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function oE(e){return n.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},n.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},n.createElement("img",{alt:"Background",src:(0,f.ck)("e19f2f58bc09414847ad59ff9228e07032e8842c"),className:"modal_comment_sidebar_announcement--image--lyA61"}),n.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),n.createElement(og.T,null)),n.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},n.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},n.createElement(ou.E,{fontSize:24,fontWeight:"semi-bold"},(0,u.t)("rcs.mobile_comment_announcement.title"))),n.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},n.createElement(ou.E,{fontSize:14},(0,u.t)("rcs.mobile_comment_announcement.description")))),n.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},n.createElement(lx.$n,{variant:"secondary",onClick:e.onEmailClick,iconPrefix:n.createElement(oo.f,null)},(0,u.t)("rcs.mobile_comment_announcement.email_download_link")),n.createElement(lx.$n,{variant:"primary",onClick:()=>{(0,_.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),e8.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},iconPrefix:n.createElement(os.b,null)},(0,u.t)("rcs.rcs_shared.learn_more"))))}var o_=l(480068),ob=l(52576),of=l(984079),ox=l(199617),oy=l(260387),oh=l(881658),oS=l(548467),oR=l(601745),ov=l(197183),oT=l(521e3),ok=l(649685),oC=l(483438),oI=l(369644),oL=l(850568),oN=l(957070);let oA=n.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,e$.p8)("isReadOnly"),l=(0,r.d4)(e=>e.progressBarState),s=(0,e$.p8)("loadingEmbeds"),g=(0,eY.ut)(i.Ez5?.uiState().showCanvasSearch,!1),p=(0,eQ.Lk)(),E=(0,n.useRef)(null),_=(0,r.d4)(e=>e.userFlags),b=!!(0,o.k)().internal_only_debug_tools||!!_.has_cursor_bot_onboarding_v2,f=(0,r.d4)(e=>e.openFile),x=f?f.key:"",y=(0,r.d4)(e=>e.universalInsertModal),h=(0,r.wA)();(0,eH.Gb)(x),(0,eK.W)(),(0,of.K)(),(0,eZ.qh)();let S=(0,eq.BI)(),R=(0,eF.e)(),v=(0,eU.ZO)(),T=(0,eU.l7)(),k=n.createElement(eJ.m,{role:"region","aria-label":(0,u.t)("fullscreen_actions.left_sidebar_label")},T?n.createElement(d.tH,{boundaryKey:"DevModeLeftPanel",fallback:d.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:a.eBU.DEVELOPER_TOOLS}},n.createElement(m.O,null)):n.createElement(ol.m,null));return n.createElement(iR,null,n.createElement(eG.ED,null),n.createElement(i9.sk,null,l.mode!==i.Oin.OFF&&n.createElement("div",{className:oN._q}),n.createElement(ll.pO,{initialFilterState:{currentPage:!1}},s.map(e=>n.createElement(ib._,{key:`loading-embed-${e}`,nodeId:e})),n.createElement(oe.qn,null),n.createElement(oT.u,null),g&&n.createElement(oi.n,null),(0,o.k)().ce_al_experiments_on&&n.createElement(oi.n,null),n.createElement(i_.GR,null),n.createElement(i_.bu,null),n.createElement(ox.J,null),n.createElement(oe.XI,{commentsDetailContainerRef:E}),!T&&!R&&!v&&n.createElement(t0.b,null),n.createElement(oL.Z,null),(0,o.k)().cursor_bot&&b&&n.createElement(or.S,null),n.createElement(ot.X,null),n.createElement(ip.J,null),n.createElement(on.Nz,null),n.createElement("div",{ref:E}),!(0,eW.T)()&&k,!t&&n.createElement(o_.E,null),n.createElement(iE.G,null,T?null:n.createElement(n.Fragment,null,n.createElement(oO,null),!!S?.shouldOptimizeForIpadApp&&n.createElement(oR.K,null),!!S?.shouldOptimizeForIpadApp&&n.createElement(ov.t,null))),e&&n.createElement(on.X5,null),(0,o.k)().aip_flower_garden&&n.createElement(im,null)),n.createElement(e0.A,{isFigjamEditor:!1,isDesignEditor:!0,isSlidesEditor:!1,openFile:f}),n.createElement(ob.l,{defaultViewTabsAvailable:!0,defaultViewAssetsTabVisible:!0}),y.showing&&n.createElement(d.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{h(c.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:d.H4.NONE_I_KNOW_WHAT_IM_DOING},n.createElement(oh.k,null))),p&&n.createElement(oa.K,{className:oN.PA},n.createElement(oS.s,null)))}),oO=n.memo(function(){let e=(0,e$.p8)("topLevelMode"),t=(0,e$.ax)(),l=(0,e$.dH)();return(0,eX.z)({topLevelMode:i.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),n.useEffect(()=>{t&&e===i.lyf.PREVIEW&&l!==i.NLJ.COMMENTS&&(0,ej.NT)(i.FAf.INSPECT)},[t,e,l]),n.createElement(n.Fragment,null,n.createElement(i2,null),n.createElement(ow,null))}),ow=n.memo(function(){let e=(0,o.k)().switch_gen1_nux_overlay;return n.createElement(n.Fragment,null,n.createElement(e1.p,null,n.createElement(te.Gen0WelcomeOverlay,null)),e&&n.createElement(e1.p,null,n.createElement(tt.OnboardGen1WelcomeOverlay,null)),n.createElement(e1.p,{featureFlag:"starting_points_modal"},n.createElement(tF,null)),n.createElement(e1.p,null,n.createElement(eD,null)),n.createElement(e1.p,null,n.createElement(oy.e,null)),n.createElement(e1.p,null,n.createElement(B,null)),n.createElement(e1.p,null,n.createElement(q,null)),n.createElement(e1.p,null,n.createElement(z.A,null)),n.createElement(e1.p,{featureFlag:"mobile_prompt_sidebar_modal"},n.createElement(op,null)),n.createElement(e1.p,null,n.createElement(ei.S,null)),n.createElement(e1.p,{featureFlag:"cmty_visual_assets_nux"},n.createElement(tZ,null)),n.createElement(e1.p,null,n.createElement(lt,null)),n.createElement(e1.p,null,n.createElement(ea,null)),!s.Xb&&n.createElement(e1.p,{featureFlag:"config_2025_launch_modal"},n.createElement(e5.d,null)),n.createElement(e1.p,null,n.createElement(e9,null)),n.createElement(e1.p,{featureFlag:"cheddar"},n.createElement(ok.Ab,null)),n.createElement(e1.p,{featureFlag:"bob_template_gen"},n.createElement(oC.E,null)))});function oM(){let[e,t]=(0,n.useState)(!1);return n.createElement(ix.c,{loadedCommentsProvider:!1},n.createElement(oI.v,{setShouldShowDragAndDropBorder:t,isDragTarget:!1},n.createElement(oA,{shouldShowDragAndDropBorder:e})))}}}]);

//# debugId=f6a2eeda-a82d-53c2-a109-6bf5f19d303c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f47c8c0f6214eab1a9b8a7c77164626b9372e6af/a88a4c5a-4cfbcf53784f433f.min.js.map